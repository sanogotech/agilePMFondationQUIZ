<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgilePM v3 Exam Simulation - Advanced Governance</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --advanced-purple: #9b59b6;
            --agile-blue: #4d8af0;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --light-bg: #f8f9fa;
            --white-color: #ffffff;
            --grey-text: #7f8c8d;
            --exam-orange: #e67e22; /* New color for exam focus */
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: var(--primary-color);
            padding-top: 2rem;
        }

        .quiz-container {
            max-width: 900px;
            margin: auto;
            background-color: var(--white-color);
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .quiz-header h1 {
            color: var(--primary-color);
            font-weight: 700;
            text-align: center;
        }
        
        .quiz-header p {
            text-align: center;
            color: var(--grey-text);
            margin-bottom: 2rem;
        }

        .difficulty-badge {
            background-color: var(--exam-orange);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .progress-container {
            margin-bottom: 1.5rem;
        }

        #question-counter {
            font-weight: 600;
            color: var(--secondary-color);
        }

        #question-card {
            border: none;
            border-radius: 10px;
            padding: 2rem;
            background-color: #fdfdfd;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
        }
        
        #question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 2rem;
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 1rem 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            border-radius: 8px;
            border: 2px solid #ecf0f1;
            background-color: var(--white-color);
            transition: all 0.3s ease;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--exam-orange);
            background-color: #fff8f2;
        }
        
        .option-btn.correct {
            background-color: #e9f7ef;
            border-color: var(--success-color);
            color: var(--success-color);
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #fdeded;
            border-color: var(--danger-color);
            color: var(--danger-color);
            font-weight: 600;
        }

        #explanation-box {
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            font-size: 0.95rem;
        }
        
        #explanation-box h5 {
            font-weight: 700;
        }

        .explanation-correct {
             background-color: #e9f7ef;
             border-left: 5px solid var(--success-color);
        }

        .explanation-incorrect {
            background-color: #fdeded;
            border-left: 5px solid var(--danger-color);
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .nav-btn {
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 8px;
        }

        /* Modal styling */
        .modal-header {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .modal-title-icon {
            font-size: 2rem;
            margin-right: 1rem;
        }
        
        .final-score {
            font-size: 3.5rem;
            font-weight: 700;
        }
        
        .score-text {
            font-size: 1.5rem;
        }
        
        .question-number-badge {
            background-color: var(--exam-orange);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        .tip-box {
            background-color: #fff8f2;
            border-left: 5px solid var(--exam-orange);
            padding: 1rem;
            border-radius: 5px;
            margin-top: 1rem;
        }
        
        .tip-box h6 {
            color: var(--exam-orange);
            font-weight: 600;
        }
        
        .settings-panel {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .advanced-hint {
            background-color: #ffe8d6;
            border-left: 5px solid var(--exam-orange);
            padding: 0.75rem;
            border-radius: 5px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h1><i class="fas fa-book-reader" style="color:var(--exam-orange);"></i> AgilePM v3 Official Exam Simulation</h1>
                <p>Test your nuanced and complex understanding of AgilePM for advanced certification success.</p>
                <span class="difficulty-badge"><i class="fas fa-certificate"></i> EXAM LEVEL</span>
            </div>
            
            <div id="settings-panel" class="settings-panel">
                <h4><i class="fas fa-cog"></i> Quiz Configuration</h4>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label for="question-count" class="form-label">Number of Questions:</label>
                        <select id="question-count" class="form-select">
                            <option value="10">10 Questions</option>
                            <option value="20">20 Questions</option>
                            <option value="30" selected>30 Questions (Recommended)</option>
                            <option value="50">50 Questions</option>
                        </select>
                    </div>
                    <div class="col-md-6 d-flex align-items-end">
                        <button id="start-quiz-btn" class="btn btn-primary w-100" style="background-color: var(--exam-orange); border-color: var(--exam-orange);">Start Exam Simulation</button>
                    </div>
                </div>
                <div class="advanced-hint mt-3">
                    <strong><i class="fas fa-exclamation-triangle"></i> Warning:</strong> These questions are designed to test subtle distinctions in roles, principles, and techniques, similar to those encountered in the official AgilePM Advanced examination.
                </div>
            </div>

            <div id="quiz-content" class="d-none">
                <div class="progress-container">
                     <div class="d-flex justify-content-between align-items-center mb-1">
                        <span id="question-counter">Question 1 / 30</span>
                        <span id="current-score">Score: 0</span>
                     </div>
                    <div class="progress" style="height: 10px;">
                        <div id="progress-bar" class="progress-bar" style="background-color: var(--exam-orange); width: 3.33%;" role="progressbar" aria-valuenow="3.33" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>

                <div id="question-card" class="card">
                    <div class="card-body">
                        <h2 id="question-text">Loading question...</h2>
                        <div id="options-container">
                            </div>
                        <div id="explanation-box" class="d-none">
                            <h5 id="explanation-title"></h5>
                            <p id="explanation-text"></p>
                            <div id="tip-box" class="tip-box d-none">
                                <h6><i class="fas fa-lightbulb"></i> Official Exam Insight</h6>
                                <p id="tip-text"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quiz-navigation">
                    <button id="prev-btn" class="btn btn-outline-secondary nav-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                    <button id="next-btn" class="btn btn-primary nav-btn" style="background-color: var(--exam-orange); border-color: var(--exam-orange);">Next <i class="fas fa-arrow-right"></i></button>
                    <button id="finish-btn" class="btn btn-success nav-btn d-none"><i class="fas fa-flag-checkered"></i> Finish & View Results</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="resultsModal" tabindex="-1" aria-labelledby="resultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background-color: var(--exam-orange);">
                    <h5 class="modal-title" id="resultsModalLabel"><i class="fas fa-medal modal-title-icon"></i> Exam Simulation Results</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-4">
                    <h4 class="score-text">Your final score is:</h4>
                    <p class="final-score" id="final-score-percentage">0%</p>
                    <p class="text-muted fs-5">
                        <span id="final-score-correct">0</span> out of 
                        <span id="final-score-total">0</span> correct answers
                    </p>
                    <hr>
                    <div id="final-recommendations"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="restart-quiz-btn" style="background-color: var(--exam-orange); border-color: var(--exam-orange);"><i class="fas fa-redo"></i> Re-take Simulation</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Advanced questions with detailed explanations and tips (Translated)
        const quizData = {
            questions: [
                {
                    question: "According to the 'Never Compromise Quality' principle, what is the *only* acceptable action when a development timebox cannot deliver all 'Must Have' requirements without lowering the Definition of Done?",
                    options: [
                        "Extend the timebox slightly to complete the work",
                        "Collaborate with the Business Ambassador to de-scope or simplify a 'Must Have' to fit the timebox",
                        "Accept a lower quality increment to meet the original time constraint",
                        "Seek immediate escalation to the Business Sponsor for tolerance extension"
                    ],
                    correctAnswer: "Collaborate with the Business Ambassador to de-scope or simplify a 'Must Have' to fit the timebox",
                    explanation: "The principle 'Never Compromise Quality' is paramount. The timebox is fixed. Therefore, if the Must Have cannot be delivered to the required quality within the timebox, the *scope* must be reduced or simplified in collaboration with the Business Ambassador. Extending the timebox or lowering quality violates fundamental AgilePM principles.",
                    tip: "In AgilePM, Quality is fixed, Time is fixed, and Scope is variable (via MoSCoW). When a 'Must Have' is at risk, you protect Quality and Time by adjusting Scope."
                },
                {
                    question: "Which of the following best defines the primary difference between the **Technical Coordinator** and the **Solution Developer** role in AgilePM?",
                    options: [
                        "The Technical Coordinator designs the architecture; the Solution Developer focuses solely on testing.",
                        "The Technical Coordinator ensures technical consistency across the project; the Solution Developer focuses on code delivery and technical quality within the team.",
                        "The Technical Coordinator manages the overall technical risk; the Solution Developer manages the detailed project schedule.",
                        "The Technical Coordinator is a business role; the Solution Developer is a technical role."
                    ],
                    correctAnswer: "The Technical Coordinator ensures technical consistency across the project; the Solution Developer focuses on code delivery and technical quality within the team.",
                    explanation: "The **Technical Coordinator** (TC) has a cross-team/project-wide view, ensuring technical consistency and architectural integrity. The **Solution Developer** is focused on the actual creation, testing, and technical quality of the increment within their specific team/timebox.",
                    tip: "The TC's responsibility is *governance* of the solution design, while the Solution Developer's is *delivery* according to that design."
                },
                {
                    question: "If a 'Should Have' requirement is de-scoped (removed) from the current Project Increment due to time constraints, what is the mandatory next step in line with the 'Demonstrate Control' principle?",
                    options: [
                        "The Project Manager must formally log the de-scoping in the **Project Review Form** and ensure the **Prioritised Requirements List (PRL)** is updated.",
                        "The Business Ambassador must justify the decision to the Project Manager verbally.",
                        "The de-scoped item must be immediately escalated to the Business Sponsor for approval.",
                        "The team must automatically replace the 'Should Have' with a 'Could Have' of similar effort."
                    ],
                    correctAnswer: "The Project Manager must formally log the de-scoping in the **Project Review Form** and ensure the **Prioritised Requirements List (PRL)** is updated.",
                    explanation: "De-scoping a 'Should Have' is a valid action within tolerance, but the 'Demonstrate Control' principle requires formal management. The Project Manager documents all significant deviations and the current project status in the Project Review Form, and the PRL is the live document that tracks what has been delivered and what remains.",
                    tip: "The PRL is the key document for scope management and the Project Review Form (or its equivalent) is the key document for governance and control visibility."
                },
                {
                    question: "What is the primary objective of the **Project Review** in the AgilePM lifecycle, distinct from a Post-Project Review?",
                    options: [
                        "To perform detailed lessons learned for future projects.",
                        "To determine whether the project has continued business justification and remains viable.",
                        "To conduct an in-depth technical inspection of the code quality.",
                        "To secure final sign-off for the deployment of the final solution."
                    ],
                    correctAnswer: "To determine whether the project has continued business justification and remains viable.",
                    explanation: "The Project Review is a formal governance checkpoint, typically occurring at the end of each Project Increment, to assess project performance, address risks, and, most importantly, re-examine the **Business Case** to ensure the project remains on track and provides continued viability for the investment.",
                    tip: "Think of the Project Review as a continuous 'Go/No Go' decision point, protecting the investment by checking for ongoing business justification."
                },
                {
                    question: "Which scenario represents the *most appropriate* application of the **Deployment Timebox** as defined in AgilePM?",
                    options: [
                        "A three-day effort to complete the last 10% of code for the final functional requirements.",
                        "A highly controlled, fixed-duration, and dedicated period for migrating data, installing the solution, and handing it over to operations.",
                        "A phase dedicated to resolving all outstanding 'Nice to Have' requirements after the final testing is complete.",
                        "An emergency timebox used to fix critical bugs found during the final User Acceptance Testing (UAT)."
                    ],
                    correctAnswer: "A highly controlled, fixed-duration, and dedicated period for migrating data, installing the solution, and handing it over to operations.",
                    explanation: "The Deployment Timebox is a short, sharp, and highly controlled period specifically for deployment and transition activities, such as data migration, installation, and formal handover. It is *not* for developing new features, fixing major bugs, or completing development work.",
                    tip: "The Deployment Timebox is an operational activity, not a development one. All development should be complete before it starts."
                },
                {
                    question: "In a scenario where a core system dependency is failing to integrate with the new solution, creating a severe risk of not meeting the timebox objectives, which AgilePM role is primarily responsible for **facilitating the resolution** of this dependency clash?",
                    options: [
                        "The Business Visionary, as the clash affects the ultimate product vision.",
                        "The Technical Coordinator, as they are responsible for overall technical integrity and architectural guidance.",
                        "The Project Manager, as they are responsible for managing the project's overall constraints and facilitating communication across different teams/stakeholders.",
                        "The Business Ambassador, as they prioritize the dependencies."
                    ],
                    correctAnswer: "The Project Manager, as they are responsible for managing the project's overall constraints and facilitating communication across different teams/stakeholders.",
                    explanation: "While the Technical Coordinator provides the *technical advice* and the Solution Development Team handles the *technical execution*, the **Project Manager** is the ultimate owner of the project's constraints (Time, Cost, Quality) and is responsible for *facilitating* the resolution of cross-cutting risks and conflicts, often by engaging the appropriate stakeholders (including the TC) and managing the escalation process.",
                    tip: "The Project Manager role in AgilePM is focused on managing the project's 'Big Picture' constraints and facilitating the environment for success, especially in complex dependencies."
                },
                {
                    question: "What is the key difference between the **Business Case** and the **Benefits Assessment** in the context of project closure?",
                    options: [
                        "The Business Case is created at project closure; the Benefits Assessment is created during the Feasibility phase.",
                        "The Business Case justifies the *initial* investment; the Benefits Assessment verifies the *actual* realization of benefits after the solution has gone live.",
                        "The Business Case is a mandatory document; the Benefits Assessment is optional.",
                        "The Business Case is focused on technology; the Benefits Assessment is focused on finance."
                    ],
                    correctAnswer: "The Business Case justifies the *initial* investment; the Benefits Assessment verifies the *actual* realization of benefits after the solution has gone live.",
                    explanation: "The Business Case (justification) is the core document created early on and maintained throughout to justify the project. The Benefits Assessment (verification) is typically conducted *after* project closure and solution deployment (often 3-6 months later) to confirm that the promised benefits have actually been realized.",
                    tip: "Benefits Assessment ensures the 'Focus on Business Need' principle is applied throughout, even post-delivery, by checking for outcomes, not just outputs."
                },
                {
                    question: "Which AgilePM practice directly ensures the principle 'Communicate Continuously and Clearly' is upheld by providing a living, high-level document of all key decisions and agreements?",
                    options: [
                        "The Daily Stand-Up.",
                        "The Timebox Review.",
                        "The **Project Approach Questionnaire (PAQ)**.",
                        "The Business Ambassador's weekly status report."
                    ],
                    correctAnswer: "The **Project Approach Questionnaire (PAQ)**.",
                    explanation: "The PAQ is a formal document created during the Foundations phase that defines the specific tailored approach, roles, tools, and constraints for the project. It is reviewed by key stakeholders and acts as the project's definitive rulebook for communication and operation, which is critical for continuous and clear communication.",
                    tip: "The PAQ is often overlooked but is a vital component of the Foundations phase, ensuring project alignment from the start."
                },
                {
                    question: "How does the **Modelling** technique, when used effectively in AgilePM, contribute to the 'Build Incrementally from Firm Foundations' principle?",
                    options: [
                        "It allows the team to deliver a fully functional increment without needing a technical architecture.",
                        "It helps establish the **Firm Foundations** by visualizing the architectural design and business context before development begins.",
                        "It is exclusively used during the Deployment Timebox to simulate the final go-live process.",
                        "It replaces the need for the Prioritised Requirements List (PRL)."
                    ],
                    correctAnswer: "It helps establish the **Firm Foundations** by visualizing the architectural design and business context before development begins.",
                    explanation: "Modelling (e.g., prototyping, data diagrams) is essential in the Foundations phase to visualize the high-level architecture and overall business context. This initial modelling work defines the 'Firm Foundations' that the iterative and incremental development will build upon.",
                    tip: "Modelling ensures that the Foundations are firm enough to prevent costly rework later in the delivery timeboxes."
                },
                {
                    question: "When applying MoSCoW, the **Business Visionary** insists that a specific requirement be classified as a 'Must Have'. The **Business Ambassador** argues it is a 'Should Have'. According to AgilePM principles, whose classification must prevail?",
                    options: [
                        "The Business Ambassador, as they represent the day-to-day users.",
                        "The Business Visionary, as they represent the overall business goal and strategic funding.",
                        "The Project Manager, as they are responsible for meeting the overall project objectives.",
                        "The Development Team, as they know the technical effort required."
                    ],
                    correctAnswer: "The Business Visionary, as they represent the overall business goal and strategic funding.",
                    explanation: "The Business Visionary is the strategic decision-maker and the source of funding and overall business objectives. Their view on the strategic importance of a requirement (and therefore its MoSCoW rating) must ultimately prevail in cases of conflict, even if the Business Ambassador provides a strong user-level argument.",
                    tip: "The Business Visionary holds the strategic MoSCoW pen; the Business Ambassador holds the tactical details."
                },
                {
                    question: "What is the *most* accurate definition of **Risk Capacity** in a controlled AgilePM environment?",
                    options: [
                        "The total number of risks the Project Manager is able to track simultaneously.",
                        "The maximum amount of time or budget tolerance the Business Sponsor is willing to accept before an Exception is declared.",
                        "The total risk exposure that can be ignored by the Development Team.",
                        "The likelihood that a risk will actually occur during a timebox."
                    ],
                    correctAnswer: "The maximum amount of time or budget tolerance the Business Sponsor is willing to accept before an Exception is declared.",
                    explanation: "**Risk Capacity** relates directly to the maximum allowable deviation or tolerance set by the Business Sponsor. Once a risk materializes and its impact pushes the project beyond these defined tolerances, an Exception situation is triggered, requiring escalation.",
                    tip: "Risk Capacity defines the governance boundaries. It's set high up (Sponsor) and enforced by the Project Manager."
                },
                {
                    question: "How does the principle 'Focus on Business Need' primarily influence the management of **technical debt**?",
                    options: [
                        "Technical debt is always deferred to maximize feature delivery.",
                        "Technical debt is addressed only if the Development Team has spare capacity.",
                        "Technical debt is visible, estimated, and addressed *when* it threatens the team's ability to deliver future business value.",
                        "Technical debt is solely the responsibility of the Technical Coordinator and is not discussed with business roles."
                    ],
                    correctAnswer: "Technical debt is visible, estimated, and addressed *when* it threatens the team's ability to deliver future business value.",
                    explanation: "Technical debt is a threat to the ability to deliver future value. Following the 'Focus on Business Need' principle, technical debt is managed as a business investment: it is prioritized and addressed when the cost of continuing with the debt (reduced velocity, increased bug rate) exceeds the cost of fixing it.",
                    tip: "In AgilePM, technical debt is a business decision, not a purely technical one."
                },
                {
                    question: "During a **Project Increment**, a significant dependency on an external supplier has been identified. Which document is *least* likely to be the primary source for formally tracking the status and dates of this external dependency?",
                    options: [
                        "The Delivery Plan.",
                        "The Prioritised Requirements List (PRL).",
                        "The Risk Log.",
                        "The **Feasibility Assessment**."
                    ],
                    correctAnswer: "The **Feasibility Assessment**.",
                    explanation: "The Feasibility Assessment is a short document created at the very start of the project to check if an agile approach is appropriate and viable. It is not a live tracking document. The Delivery Plan, PRL, and Risk Log are all actively used during the Project Increment to track status, requirements, and risks, including external dependencies.",
                    tip: "Feasibility is a one-time check; Delivery Plan, PRL, and Risk Log are continuous tracking mechanisms."
                },
                {
                    question: "Which statement best describes the Project Manager's role in the **Timebox Review**?",
                    options: [
                        "To lead the review, deciding which requirements are considered 'done'.",
                        "To observe and listen, ensuring the process is followed and removing any cross-team obstacles discussed.",
                        "To challenge the Development Team's MoSCoW ratings for the next Timebox.",
                        "To formally sign off the completed requirements and approve deployment."
                    ],
                    correctAnswer: "To observe and listen, ensuring the process is followed and removing any cross-team obstacles discussed.",
                    explanation: "The Project Manager acts as a facilitator and observer in the Timebox Review. They ensure the review is effective, but they do *not* assess the work or determine 'done-ness'â€”that is the team's and Business Ambassador's responsibility. Their focus is on process and obstacle removal.",
                    tip: "The Project Manager in AgilePM is a servant leader who focuses on the project environment, not the detailed content of the team's work."
                },
                {
                    question: "In a regulated environment, which document must be carefully adapted to ensure that both business stakeholders and regulatory auditors have a common, auditable understanding of what 'complete' means?",
                    options: [
                        "The Team Development Contract.",
                        "The Daily Stand-Up Notes.",
                        "The **Definition of Done (DoD)**.",
                        "The Business Sponsor's Mandate."
                    ],
                    correctAnswer: "The **Definition of Done (DoD)**.",
                    explanation: "The DoD is the explicit, auditable checklist that defines the quality standard for an increment. In a regulated environment, it must incorporate compliance, security, and documentation requirements to satisfy auditors, while ensuring the team maintains quality and regulatory adherence.",
                    tip: "The DoD is where Quality and Compliance meet. It is one of the most critical governance artifacts in a regulated AgilePM setting."
                },
                {
                    question: "What is the primary function of the **Solution Architect** in a highly iterative project?",
                    options: [
                        "To write all the code for the most complex features.",
                        "To continually manage and evolve the *Solution Architecture Definition*, ensuring technical integrity and non-functional requirements are met.",
                        "To act as the permanent chairperson for the Daily Stand-Up.",
                        "To represent the customer's voice and prioritize the requirements."
                    ],
                    correctAnswer: "To continually manage and evolve the *Solution Architecture Definition*, ensuring technical integrity and non-functional requirements are met.",
                    explanation: "The Solution Architect is responsible for the overall technical design and integrity. They own the **Solution Architecture Definition** and evolve it iteratively, ensuring that the architecture supports the project's goals and meets crucial non-functional requirements (like performance and security).",
                    tip: "The Solution Architect's document (SAD) is the technical equivalent of the Business Visionary's (BC) - it provides the necessary technical 'Firm Foundation'."
                },
                {
                    question: "According to the 'Collaborate' principle, which is the *least* effective way for the Project Manager to handle a major conflict between the Business Ambassador and the Solution Developer on a requirement's implementation?",
                    options: [
                        "Facilitate a short, focused workshop for mutual understanding and compromise.",
                        "Present both arguments to the Business Visionary for a strategic decision.",
                        "Send a detailed email summarizing the two positions and asking for a response.",
                        "Use the Scrum Master to mediate and find a technically feasible, high-value solution."
                    ],
                    correctAnswer: "Send a detailed email summarizing the two positions and asking for a response.",
                    explanation: "The 'Collaborate' principle emphasizes face-to-face communication and joint problem-solving. Sending an email is the least effective method as it is inherently asynchronous, risks misinterpretation, and fails to leverage the collective creativity needed for a collaborative solution.",
                    tip: "Collaboration means dialogue and joint problem-solving, especially when high-value requirements are in conflict."
                },
                {
                    question: "When is the **Lessons Learned Report** most effectively initiated and utilized in a continuous improvement context?",
                    options: [
                        "It is exclusively written at the end of the project during the Close phase.",
                        "It is completed after every Project Increment and reviewed at the next Project Increment Review.",
                        "It is completed after every Delivery Timebox and is the key output of the Retrospective.",
                        "It is a continuous log maintained by the Scrum Master throughout the project."
                    ],
                    correctAnswer: "It is completed after every Project Increment and reviewed at the next Project Increment Review.",
                    explanation: "While learning happens in every Timebox (via the Retrospective), the formal **Lessons Learned Report** is an output of the **Post-Project Review**, but is best captured and updated at the end of *each Project Increment* to formalize and share organizational learning across the project governance structure.",
                    tip: "Retrospectives are for the team (tactical); Lessons Learned Reports are for the organization/governance (strategic)."
                },
                {
                    question: "Which of the following best exemplifies the **Project Management** role's responsibility during the **Evolve** lifecycle phase?",
                    options: [
                        "Detailed coding and unit testing of the remaining 'Could Have' features.",
                        "Ensuring that the delivered solution continues to be actively supported and that the planned benefits are being measured and realized.",
                        "Finalizing the Business Case and securing funding for the next major project.",
                        "Creating a comprehensive communication plan for the next project."
                    ],
                    correctAnswer: "Ensuring that the delivered solution continues to be actively supported and that the planned benefits are being measured and realized.",
                    explanation: "The Project Manager's responsibility often extends into the Evolve phase, particularly around ensuring the project's outputs transition smoothly to operations and that the actual **Benefit Assessment** process is being followed, ensuring the 'Focus on Business Need' principle is fully satisfied.",
                    tip: "The Evolve phase is critical for validating the initial business need through observed outcomes, often post-Project Manager handover."
                },
                {
                    question: "If a project is deemed **not viable** during the mid-project **Project Review**, which key decision is the **Business Sponsor** primarily responsible for making?",
                    options: [
                        "Directing the Project Manager to reduce the 'Must Have' scope to save the project.",
                        "Terminating the project immediately or changing the project's strategic direction.",
                        "Re-assigning all team members to a different project.",
                        "Extending the project's deadline by one month to resolve the viability issue."
                    ],
                    correctAnswer: "Terminating the project immediately or changing the project's strategic direction.",
                    explanation: "The Business Sponsor is the owner of the Business Case and the ultimate decision-maker on project viability. If a Project Review determines the project is no longer viable (e.g., the costs outweigh the remaining benefits), the Sponsor must decide whether to terminate it or significantly change its strategic course.",
                    tip: "The Project Review is the checkpoint for the Sponsor to exercise their governance responsibility for the project's continued existence."
                },
                {
                    question: "What is the *most critical* consideration for the **Business Ambassador** during the **Timebox Review**?",
                    options: [
                        "Analyzing the technical efficiency of the code.",
                        "Formally accepting or rejecting the Increment based on the achievement of Acceptance Criteria and the Definition of Done.",
                        "Calculating the team's velocity for the next Timebox.",
                        "Detailed discussion of team resourcing for the next Timebox."
                    ],
                    correctAnswer: "Formally accepting or rejecting the Increment based on the achievement of Acceptance Criteria and the Definition of Done.",
                    explanation: "The Business Ambassador (BA) is the business representative in the team and is responsible for the quality of the delivered solution from a business perspective. Their key task in the Timebox Review is to confirm that the increment meets the Acceptance Criteria (business view) and the Definition of Done (quality view).",
                    tip: "The BA acts as the 'Gatekeeper' for the acceptance of delivered value at the team level."
                },
                {
                    question: "Which of the following best reflects the **Empower Teams** principle in the context of the **Solution Developer** role?",
                    options: [
                        "Solution Developers must be solely responsible for defining the project's MoSCoW priorities.",
                        "Solution Developers are empowered to make day-to-day decisions on *how* to build the solution and what goes into the **Technical Design**. ",
                        "Solution Developers can unilaterally change the Definition of Done if they think it is too restrictive.",
                        "Solution Developers must always follow the instructions of the Project Manager without question."
                    ],
                    correctAnswer: "Solution Developers are empowered to make day-to-day decisions on *how* to build the solution and what goes into the **Technical Design**. ",
                    explanation: "Empowerment means the team is trusted to self-organize and make the day-to-day technical decisions. Solution Developers are the experts on *how* to build the product and are empowered to design the technical solution within the framework of the **Solution Architecture Definition**.",
                    tip: "Empowerment focuses on *how* to deliver (technical decisions), not *what* to deliver (prioritization/MoSCoW)."
                },
                {
                    question: "When applying the **MoSCoW** technique, an item classified as a 'Won't Have' for the current Project Increment may be which of the following?",
                    options: [
                        "A requirement that the Business Visionary has agreed will *never* be built.",
                        "A requirement that the Project Manager deems too technically complex for the current team.",
                        "A requirement that is valid but agreed to be delivered *after* the current Project Increment.",
                        "A requirement that is automatically removed from the Prioritised Requirements List (PRL)."
                    ],
                    correctAnswer: "A requirement that is valid but agreed to be delivered *after* the current Project Increment.",
                    explanation: "A 'Won't Have' (W) means the requirement will not be delivered in *this specific* increment, but it may be delivered in a *future* increment or project. It is **not** a guarantee that it will never be built.",
                    tip: "MoSCoW is an Incremental/Timebox prioritization tool; it is not a permanent strategic decision on the lifetime of a requirement."
                },
                {
                    question: "What is the most accurate purpose of **Facilitated Workshops** in the AgilePM Framework?",
                    options: [
                        "To allow the Project Manager to issue formal instructions to the team.",
                        "To ensure rapid, shared, and effective creation of a deliverable by bringing all necessary stakeholders together for an intensive session.",
                        "To replace all informal communication with structured meetings.",
                        "To provide a forum for the team to air grievances about project constraints."
                    ],
                    correctAnswer: "To ensure rapid, shared, and effective creation of a deliverable by bringing all necessary stakeholders together for an intensive session.",
                    explanation: "Facilitated Workshops are a core technique for accelerating information exchange, decision-making, and consensus building. They are used to collaboratively create or validate key deliverables (like the Solution Architecture Definition or major user stories) quickly and effectively.",
                    tip: "Workshops leverage collaboration to achieve rapid consensus and high-quality deliverables, often replacing weeks of email and individual meetings."
                },
                {
                    question: "How does AgilePM address the need for a comprehensive audit trail and formal sign-off in a high-governance environment?",
                    options: [
                        "By requiring every delivered line of code to be signed off by the Business Sponsor.",
                        "Through the use of key governance documents like the **Project Review Form**, which tracks sign-offs and decisions at Increment boundaries.",
                        "By eliminating all paperwork in favor of a purely verbal process.",
                        "By forcing the Project Manager to maintain a separate, non-agile set of documentation."
                    ],
                    correctAnswer: "Through the use of key governance documents like the **Project Review Form**, which tracks sign-offs and decisions at Increment boundaries.",
                    explanation: "AgilePM uses its formal documentation (Project Review Form, Project Management Handbook, Solution Architecture Definition) at strategic points (like the end of Foundations or Increments) to provide the necessary audit trail and formal sign-off needed for good governance.",
                    tip: "Formal governance in AgilePM is light but strategically placed, focusing on checkpoints, not continuous micro-management."
                },
                {
                    question: "Which role is primarily responsible for ensuring that the non-functional requirements (e.g., performance, security) are correctly interpreted and integrated into the Definition of Done (DoD)?",
                    options: [
                        "The Business Visionary.",
                        "The **Technical Coordinator** (TC).",
                        "The Team Leader.",
                        "The Business Ambassador."
                    ],
                    correctAnswer: "The **Technical Coordinator** (TC).",
                    explanation: "The Technical Coordinator (TC) is responsible for the overall technical solution and integrity. Non-functional requirements (NFRs) are critical technical constraints, and it is the TC's job to ensure they are adequately defined and reflected in the quality standard (DoD).",
                    tip: "The TC is the custodian of technical quality and NFRs at the project level."
                },
                {
                    question: "In a Timebox planning session, the **Team Leader** uses their experience from previous Timeboxes to estimate a task. This is an example of which AgilePM estimation technique?",
                    options: [
                        "Estimation by Analogy.",
                        "Wideband Delphi.",
                        "Planning Poker.",
                        "Three-Point Estimation."
                    ],
                    correctAnswer: "Estimation by Analogy.",
                    explanation: "Estimation by Analogy involves comparing the current task with a similar task completed in the past, leveraging the team's or individual's experience to provide an estimate. This is a common method in AgilePM, especially when the team leader has relevant historical data.",
                    tip: "AgilePM encourages pragmatic estimation techniques that leverage experience and collaboration."
                },
                {
                    question: "What is the key purpose of the **Solution Architecture Definition (SAD)** in the Foundations phase?",
                    options: [
                        "To define every detail of the final system design.",
                        "To provide the *technical firm foundation* and the architectural framework that guides the incremental development.",
                        "To manage all the technical debt that will be incurred during the project.",
                        "To replace the **Project Approach Questionnaire (PAQ)**."
                    ],
                    correctAnswer: "To provide the *technical firm foundation* and the architectural framework that guides the incremental development.",
                    explanation: "The SAD, owned by the Solution Architect, sets the high-level technical direction, defines key non-functional requirements, and establishes the architectural constraints (the 'Firm Foundation') that the development teams must adhere to during the iterative timeboxes.",
                    tip: "The SAD ensures technical consistency and prevents the architecture from becoming chaotic as the solution evolves."
                },
                {
                    question: "Which of the following best describes the Project Manager's primary activity during a **Pre-Project** phase?",
                    options: [
                        "Creating the detailed Delivery Plan with the team.",
                        "Conducting the **Feasibility Assessment** and ensuring the **Business Sponsor** is in place.",
                        "Starting the first Development Timebox to build a prototype.",
                        "Finalizing the **Prioritised Requirements List (PRL)**."
                    ],
                    correctAnswer: "Conducting the **Feasibility Assessment** and ensuring the **Business Sponsor** is in place.",
                    explanation: "The Pre-Project phase is about ensuring the basic prerequisites for success are in place. This includes performing the Feasibility Assessment (Is AgilePM suitable?) and formally identifying and confirming the Business Sponsor and Business Visionary.",
                    tip: "The Pre-Project phase is a critical, short check to confirm the project's 'Readiness' before significant investment begins."
                },
                {
                    question: "How does the principle **Communicate Continuously and Clearly** affect the reporting structure in a large-scale agile program?",
                    options: [
                        "It requires all reporting to be verbal and informal to save time.",
                        "It ensures that reports are tailored to the needs of the audience (e.g., using Burn-Up charts for management, detailed status for other teams).",
                        "It mandates that only the Project Manager communicates with the Business Sponsor.",
                        "It means all team members must attend every single meeting."
                    ],
                    correctAnswer: "It ensures that reports are tailored to the needs of the audience (e.g., using Burn-Up charts for management, detailed status for other teams).",
                    explanation: "Continuous and clear communication means delivering the *right* information to the *right* people in the *right* format. Different stakeholders have different needs; senior management needs outcome-focused summaries (like Burn-Ups), while teams need detailed technical status.",
                    tip: "Tailoring communication is key to maintaining transparency without causing information overload."
                }
            ]
        };

        // DOM Elements
        const settingsPanelEl = document.getElementById('settings-panel');
        const quizContentEl = document.getElementById('quiz-content');
        const questionCountEl = document.getElementById('question-count');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const questionCounterEl = document.getElementById('question-counter');
        const currentScoreEl = document.getElementById('current-score');
        const progressBarEl = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const explanationBoxEl = document.getElementById('explanation-box');
        const explanationTitleEl = document.getElementById('explanation-title');
        const explanationTextEl = document.getElementById('explanation-text');
        const tipBoxEl = document.getElementById('tip-box');
        const tipTextEl = document.getElementById('tip-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        
        // Modal Elements
        const resultsModal = new bootstrap.Modal(document.getElementById('resultsModal'));
        const finalScoreCorrectEl = document.getElementById('final-score-correct');
        const finalScoreTotalEl = document.getElementById('final-score-total');
        const finalScorePercentageEl = document.getElementById('final-score-percentage');
        const finalRecommendationsEl = document.getElementById('final-recommendations');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');

        // Quiz State
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let questions = [];
        let selectedQuestionCount = 30; // Defaulting to 30 for exam simulation

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            selectedQuestionCount = parseInt(questionCountEl.value);
            // Shuffle all questions and take the selected number
            const shuffledQuestions = shuffleArray([...quizData.questions]);
            questions = shuffledQuestions.slice(0, selectedQuestionCount);
            
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            
            // Hide settings, show quiz content
            settingsPanelEl.classList.add('d-none');
            quizContentEl.classList.remove('d-none');
            
            displayQuestion(currentQuestionIndex);
            updateScoreDisplay();
            resultsModal.hide();
        }

        function displayQuestion(index) {
            // Hide explanation from previous question
            explanationBoxEl.classList.add('d-none');
            tipBoxEl.classList.add('d-none');
            
            const question = questions[index];
            questionTextEl.textContent = question.question;
            
            // Clear previous options
            optionsContainerEl.innerHTML = '';
            
            // Display options
            question.options.forEach(optionText => {
                const button = document.createElement('button');
                button.textContent = optionText;
                button.classList.add('btn', 'option-btn');
                button.onclick = () => selectAnswer(button, optionText, index);
                optionsContainerEl.appendChild(button);
            });
            
            updateNavigation();
            updateProgressBar();
            
            // If the user has already answered this question, show their answer
            if (userAnswers[index] !== null) {
                showAnswerFeedback(index);
            }
        }
        
        function selectAnswer(button, selectedAnswer, questionIndex) {
            // Prevent re-answering
            if (userAnswers[questionIndex] !== null) return;
            
            const question = questions[questionIndex];
            const isCorrect = selectedAnswer === question.correctAnswer;
            
            userAnswers[questionIndex] = {
                selected: selectedAnswer,
                correct: question.correctAnswer,
                isCorrect: isCorrect
            };
            
            if(isCorrect) {
                score++;
            }
            updateScoreDisplay();
            showAnswerFeedback(questionIndex);
        }

        function showAnswerFeedback(index) {
            const userAnswer = userAnswers[index];
            if (!userAnswer) return;

            const question = questions[index];

            // Disable all option buttons
            const optionButtons = optionsContainerEl.querySelectorAll('.option-btn');
            optionButtons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === userAnswer.correct) {
                    btn.classList.add('correct');
                } else if (btn.textContent === userAnswer.selected) {
                    btn.classList.add('incorrect');
                }
            });

            // Show explanation
            explanationTextEl.textContent = question.explanation;
            if (userAnswer.isCorrect) {
                explanationTitleEl.textContent = "Correct! Well done!";
                explanationBoxEl.className = 'explanation-correct';
            } else {
                explanationTitleEl.textContent = "Explanation:";
                explanationBoxEl.className = 'explanation-incorrect';
            }
            explanationBoxEl.classList.remove('d-none');
            
            // Show tip if available
            if (question.tip) {
                tipTextEl.textContent = question.tip;
                tipBoxEl.classList.remove('d-none');
            }
        }

        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.classList.toggle('d-none', currentQuestionIndex === questions.length - 1);
            finishBtn.classList.toggle('d-none', currentQuestionIndex !== questions.length - 1);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBarEl.style.width = `${progress}%`;
            progressBarEl.setAttribute('aria-valuenow', progress);
            questionCounterEl.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
        }
        
        function updateScoreDisplay() {
            currentScoreEl.textContent = `Score: ${score}`;
        }

        function handleNext() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        function handlePrev() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        function showFinalResults() {
            const percentage = (score / questions.length) * 100;
            let scoreColor;
            let recommendationsHtml;

            // Passing score for official exam is 60%
            if (percentage >= 80) {
                scoreColor = 'var(--success-color)';
                recommendationsHtml = '<h5><i class="fas fa-trophy text-warning"></i> Certified Level!</h5><p>Outstanding performance! Your score suggests you are fully prepared for the official AgilePM Advanced exam. Focus on reinforcing your weakest areas for maximum confidence.</p>';
            } else if (percentage >= 60) {
                scoreColor = 'var(--exam-orange)';
                recommendationsHtml = '<h5><i class="fas fa-check-circle text-success"></i> Passed! (Official Score)</h5><p>Congratulations, your score meets the passing requirement for the official exam. Review the questions you got wrong to solidify your knowledge and achieve a higher score.</p>';
            } else if (percentage >= 50) {
                scoreColor = 'var(--agile-blue)';
                recommendationsHtml = '<h5><i class="fas fa-redo-alt text-primary"></i> Needs Refinement!</h5><p>You are very close to the passing mark. Focus your study on the official roles, principles, and lifecycle stages, as the exam often tests subtle distinctions.</p>';
            } else {
                scoreColor = 'var(--danger-color)';
                recommendationsHtml = '<h5><i class="fas fa-book-open text-secondary"></i> Study Required!</h5><p>The Advanced level requires a deep and nuanced understanding. We strongly recommend reviewing the core principles and the detailed responsibilities of each AgilePM role.</p>';
            }

            finalScoreCorrectEl.textContent = score;
            finalScoreTotalEl.textContent = questions.length;
            finalScorePercentageEl.textContent = `${percentage.toFixed(0)}%`;
            finalScorePercentageEl.style.color = scoreColor;
            finalRecommendationsEl.innerHTML = recommendationsHtml;

            resultsModal.show();
        }

        function restartQuiz() {
            // Show settings, hide quiz content
            settingsPanelEl.classList.remove('d-none');
            quizContentEl.classList.add('d-none');
            resultsModal.hide();
        }

        // Event Listeners
        startQuizBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', handleNext);
        prevBtn.addEventListener('click', handlePrev);
        finishBtn.addEventListener('click', showFinalResults);
        restartQuizBtn.addEventListener('click', restartQuiz);
        
        // Initial call - show settings panel
        document.addEventListener('DOMContentLoaded', () => {
            settingsPanelEl.classList.remove('d-none');
            quizContentEl.classList.add('d-none');
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgilePM v3 Advanced - Governance and Products Simulation</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --agile-teal: #008080; /* New color theme for Governance focus */
            --agile-blue: #4d8af0;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --light-bg: #f8f9fa;
            --white-color: #ffffff;
            --grey-text: #7f8c8d;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: var(--primary-color);
            padding-top: 2rem;
        }

        .quiz-container {
            max-width: 900px;
            margin: auto;
            background-color: var(--white-color);
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .quiz-header h1 {
            color: var(--primary-color);
            font-weight: 700;
            text-align: center;
        }
        
        .quiz-header p {
            text-align: center;
            color: var(--grey-text);
            margin-bottom: 2rem;
        }

        .difficulty-badge {
            background-color: var(--agile-teal);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .progress-container {
            margin-bottom: 1.5rem;
        }

        #question-counter {
            font-weight: 600;
            color: var(--secondary-color);
        }

        #question-card {
            border: none;
            border-radius: 10px;
            padding: 2rem;
            background-color: #fdfdfd;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
        }
        
        #question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 2rem;
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 1rem 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            border-radius: 8px;
            border: 2px solid #ecf0f1;
            background-color: var(--white-color);
            transition: all 0.3s ease;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--agile-teal);
            background-color: #f2ffff;
        }
        
        .option-btn.correct {
            background-color: #e9f7ef;
            border-color: var(--success-color);
            color: var(--success-color);
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #fdeded;
            border-color: var(--danger-color);
            color: var(--danger-color);
            font-weight: 600;
        }

        #explanation-box {
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            font-size: 0.95rem;
        }
        
        #explanation-box h5 {
            font-weight: 700;
        }

        .explanation-correct {
             background-color: #e9f7ef;
             border-left: 5px solid var(--success-color);
        }

        .explanation-incorrect {
            background-color: #fdeded;
            border-left: 5px solid var(--danger-color);
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .nav-btn {
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 8px;
        }

        /* Modal styling */
        .modal-header {
            background-color: var(--primary-color);
            color: var(--white-color);
        }

        .modal-title-icon {
            font-size: 2rem;
            margin-right: 1rem;
        }
        
        .final-score {
            font-size: 3.5rem;
            font-weight: 700;
        }
        
        .score-text {
            font-size: 1.5rem;
        }
        
        .question-number-badge {
            background-color: var(--agile-teal);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.9rem;
        }
        
        .tip-box {
            background-color: #e6ffff;
            border-left: 5px solid var(--agile-teal);
            padding: 1rem;
            border-radius: 5px;
            margin-top: 1rem;
        }
        
        .tip-box h6 {
            color: var(--agile-teal);
            font-weight: 600;
        }
        
        .settings-panel {
            background-color: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .advanced-hint {
            background-color: #e0f2f1;
            border-left: 5px solid var(--agile-teal);
            padding: 0.75rem;
            border-radius: 5px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h1><i class="fas fa-sitemap" style="color:var(--agile-teal);"></i> AgilePM v3 Advanced - Governance & Products</h1>
                <p>Advanced focus on AgilePM artifacts, governance roles, and complex lifecycle decisions.</p>
                <span class="difficulty-badge"><i class="fas fa-microscope"></i> GOVERNANCE FOCUS</span>
            </div>
            
            <div id="settings-panel" class="settings-panel">
                <h4><i class="fas fa-cog"></i> Quiz Configuration</h4>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label for="question-count" class="form-label">Number of Questions:</label>
                        <select id="question-count" class="form-select">
                            <option value="10">10 Questions</option>
                            <option value="20">20 Questions</option>
                            <option value="30" selected>30 Questions (Recommended)</option>
                            <option value="50">50 Questions</option>
                        </select>
                    </div>
                    <div class="col-md-6 d-flex align-items-end">
                        <button id="start-quiz-btn" class="btn btn-primary w-100" style="background-color: var(--agile-teal); border-color: var(--agile-teal);">Start Simulation</button>
                    </div>
                </div>
                <div class="advanced-hint mt-3">
                    <strong><i class="fas fa-lightbulb"></i> Focus:</strong> This set tests your knowledge of the formal documents and governance checkpoints in the AgilePM lifecycle, crucial for applying the 'Demonstrate Control' principle.
                </div>
            </div>

            <div id="quiz-content" class="d-none">
                <div class="progress-container">
                     <div class="d-flex justify-content-between align-items-center mb-1">
                        <span id="question-counter">Question 1 / 30</span>
                        <span id="current-score">Score: 0</span>
                     </div>
                    <div class="progress" style="height: 10px;">
                        <div id="progress-bar" class="progress-bar" style="background-color: var(--agile-teal); width: 3.33%;" role="progressbar" aria-valuenow="3.33" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>

                <div id="question-card" class="card">
                    <div class="card-body">
                        <h2 id="question-text">Loading question...</h2>
                        <div id="options-container">
                            </div>
                        <div id="explanation-box" class="d-none">
                            <h5 id="explanation-title"></h5>
                            <p id="explanation-text"></p>
                            <div id="tip-box" class="tip-box d-none">
                                <h6><i class="fas fa-file-contract"></i> Advanced Product Insight</h6>
                                <p id="tip-text"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quiz-navigation">
                    <button id="prev-btn" class="btn btn-outline-secondary nav-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                    <button id="next-btn" class="btn btn-primary nav-btn" style="background-color: var(--agile-teal); border-color: var(--agile-teal);">Next <i class="fas fa-arrow-right"></i></button>
                    <button id="finish-btn" class="btn btn-success nav-btn d-none"><i class="fas fa-flag-checkered"></i> Finish & View Results</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="resultsModal" tabindex="-1" aria-labelledby="resultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header" style="background-color: var(--agile-teal);">
                    <h5 class="modal-title" id="resultsModalLabel"><i class="fas fa-clipboard-check modal-title-icon"></i> Governance Simulation Results</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-4">
                    <h4 class="score-text">Your final score is:</h4>
                    <p class="final-score" id="final-score-percentage">0%</p>
                    <p class="text-muted fs-5">
                        <span id="final-score-correct">0</span> out of 
                        <span id="final-score-total">0</span> correct answers
                    </p>
                    <hr>
                    <div id="final-recommendations"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="restart-quiz-btn" style="background-color: var(--agile-teal); border-color: var(--agile-teal);"><i class="fas fa-redo"></i> Re-take Simulation</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Advanced questions with detailed explanations and tips
        const quizData = {
            questions: [
                {
                    question: "What is the key purpose of the **Deployment Planning** document, and when is it primarily created?",
                    options: [
                        "To track timebox progress; created weekly.",
                        "To define the technical architecture; created in Foundations.",
                        "To manage the transition, installation, and cutover of the solution; primarily created and refined during the Deployment Timebox.",
                        "To list all requirements prioritized by MoSCoW; created in Foundations."
                    ],
                    correctAnswer: "To manage the transition, installation, and cutover of the solution; primarily created and refined during the Deployment Timebox.",
                    explanation: "Deployment Planning is an operational product focusing on the practical steps and resources required to deploy the solution. It is finalized during the dedicated Deployment Timebox phase.",
                    tip: "Deployment Planning is distinct from Delivery Planning. Delivery Planning focuses on feature sequencing; Deployment Planning focuses on transition and go-live logistics."
                },
                {
                    question: "In the context of the **Feasibility** phase, what is the *most* crucial input the Project Manager needs to produce the **Feasibility Assessment**?",
                    options: [
                        "The detailed cost breakdown for every delivery timebox.",
                        "A preliminary high-level view of the solution architecture.",
                        "The **Business Sponsor's Mandate** and an initial definition of project objectives.",
                        "A complete list of 'Must Have' requirements."
                    ],
                    correctAnswer: "The **Business Sponsor's Mandate** and an initial definition of project objectives.",
                    explanation: "The Business Sponsor's Mandate, produced in the Pre-Project phase, is the initial source of project authority and context. The Feasibility Assessment then uses this mandate to determine if the project is viable and if an AgilePM approach is appropriate.",
                    tip: "The mandate provides the 'Why' and the 'Who' (Sponsor) that enables the Project Manager to assess Feasibility."
                },
                {
                    question: "Which document in the AgilePM framework formally captures the *tailoring* of the approach, defining the specific roles, tools, and ceremonies to be used?",
                    options: [
                        "The Business Case.",
                        "The **Project Approach Questionnaire (PAQ)**.",
                        "The Prioritised Requirements List (PRL).",
                        "The Team Development Contract."
                    ],
                    correctAnswer: "The **Project Approach Questionnaire (PAQ)**.",
                    explanation: "The PAQ is a critical governance product created in the Foundations phase. It documents the answers to key tailoring questions, ensuring all stakeholders are aligned on *how* the project will operate within the AgilePM framework.",
                    tip: "The PAQ ensures the 'Build Incrementally from Firm Foundations' principle is applied to the *process* itself."
                },
                {
                    question: "How should the **Project Manager** respond if a *major*, unexpected change in market conditions fundamentally invalidates the project's original **Business Case** during a Delivery Increment?",
                    options: [
                        "Immediately halt the Timebox and seek a resolution with the Business Ambassador.",
                        "Complete the current Timebox to deliver *some* value, and then hold an immediate **Project Review** to escalate to the **Business Sponsor**.",
                        "Continue development, assuming the market will stabilize.",
                        "Formally re-prioritise all 'Must Have' requirements to 'Should Have'."
                    ],
                    correctAnswer: "Complete the current Timebox to deliver *some* value, and then hold an immediate **Project Review** to escalate to the **Business Sponsor**.",
                    explanation: "If the Business Case is fundamentally invalid, the project's *viability* is at risk, requiring the highest level of governance intervention. Completing the current Timebox is pragmatic (delivering the value already invested), but formal escalation via the Project Review to the Business Sponsor is mandatory to decide the project's fate.",
                    tip: "Never halt work mid-Timebox unless safety is compromised. Use the scheduled governance checkpoints (or immediate, out-of-cycle reviews) for strategic decisions."
                },
                {
                    question: "Which of the following is the **Business Visionary's** most critical responsibility during the **Foundations** phase?",
                    options: [
                        "Detailed refinement of every user story.",
                        "Approving the **Business Case** and ensuring alignment with the organization's strategic goals.",
                        "Managing the daily activities of the Solution Development Team.",
                        "Defining the technical framework for integration."
                    ],
                    correctAnswer: "Approving the **Business Case** and ensuring alignment with the organization's strategic goals.",
                    explanation: "The Business Visionary is the custodian of the overall project vision and business goals. Their approval of the Business Case in the Foundations phase confirms the project's strategic alignment and provides the necessary commitment for the investment.",
                    tip: "The Business Visionary operates at the strategic level, focusing on the long-term vision and strategic governance products."
                },
                {
                    question: "In AgilePM, the **Prioritised Requirements List (PRL)** is used primarily for two things: prioritization and what else?",
                    options: [
                        "Tracking the team's weekly velocity.",
                        "Documenting all project risks.",
                        "Controlling and tracing the **scope**.",
                        "Scheduling resource allocation for the next six months."
                    ],
                    correctAnswer: "Controlling and tracing the **scope**.",
                    explanation: "The PRL is the primary scope management document. It not only lists requirements by MoSCoW priority but also tracks their status (e.g., 'To Do', 'In Progress', 'Done'), providing a controlled view and audit trail of the project's scope.",
                    tip: "The PRL is the single source of truth for scope; the Delivery Plan tracks its temporal sequence."
                },
                {
                    question: "How does the **Deployment Timebox** ensure the 'Never Compromise Quality' principle is maintained?",
                    options: [
                        "By being used to fix critical bugs found during deployment.",
                        "By including **Post-Implementation Review (PIR)** activities to ensure quality feedback.",
                        "By restricting the activities to only transition tasks, assuming the quality has been guaranteed by the **Definition of Done (DoD)**.",
                        "By forcing the Business Sponsor to sign off on quality before deployment."
                    ],
                    correctAnswer: "By restricting the activities to only transition tasks, assuming the quality has been guaranteed by the **Definition of Done (DoD)**.",
                    explanation: "The quality is built in and verified during the **Evolutionary Development** Timeboxes via the DoD. The Deployment Timebox must *not* be used for quality fixes (bug fixing, feature completion); it must focus purely on deployment logistics, leveraging the high quality guaranteed previously.",
                    tip: "The integrity of the Deployment Timebox hinges on the rigor of the Definition of Done in the preceding Delivery Increments."
                },
                {
                    question: "What is the *most* appropriate content for a **Technical Design** product in an AgilePM context?",
                    options: [
                        "A comprehensive, 50-page document defining all technical details upfront.",
                        "A living document (often lightweight models or specifications) detailing *how* a specific part of the solution will be built within the next few Timeboxes.",
                        "The final sign-off for the entire solution architecture.",
                        "The formal list of technical risks identified."
                    ],
                    correctAnswer: "A living document (often lightweight models or specifications) detailing *how* a specific part of the solution will be built within the next few Timeboxes.",
                    explanation: "The Technical Design evolves incrementally. It provides the technical 'how' for the next slice of development, adhering to the overarching **Solution Architecture Definition**. It should be lightweight, just-in-time, and easily maintained.",
                    tip: "Technical Design in AgilePM supports the 'Build Incrementally' principle by ensuring design details emerge only when needed."
                },
                {
                    question: "Which AgilePM product is used as the primary input for the **Timebox Review** to assess what should have been delivered, and is then updated to show what *was* delivered?",
                    options: [
                        "The Business Case.",
                        "The Project Review Form.",
                        "The **Timebox Plan**.",
                        "The Solution Architecture Definition."
                    ],
                    correctAnswer: "The **Timebox Plan**.",
                    explanation: "The Timebox Plan defines the detailed scope, tasks, and acceptance criteria for the specific Timebox. It is used in the Timebox Review to measure success and is updated to reflect the actual status of the work completed.",
                    tip: "The Timebox Plan is the contract for the development team for that specific period. The Timebox Review is the acceptance check of that contract."
                },
                {
                    question: "The **Team Leader** is considering using **Timeboxing** for a high-risk activity where the outcome is uncertain. What is the main benefit of applying a timebox in this specific scenario?",
                    options: [
                        "It guarantees the successful completion of the activity.",
                        "It limits the **exposure to risk** by fixing the elapsed time and budget.",
                        "It allows the team to skip the Definition of Done.",
                        "It forces the Business Visionary to approve the risk immediately."
                    ],
                    correctAnswer: "It limits the **exposure to risk** by fixing the elapsed time and budget.",
                    explanation: "Timeboxing is a risk management mechanism. By fixing the time and resources, you limit the loss (or exposure) even if the outcome is uncertain. If the objective is not met, the loss is contained.",
                    tip: "This is a key differentiator: Timeboxing in AgilePM manages risk/uncertainty by fixing cost and time, not by guaranteeing scope."
                },
                {
                    question: "Which product is **MANDATORY** to be maintained and reviewed at the end of *every* Project Increment to satisfy the 'Focus on Business Need' principle?",
                    options: [
                        "The Team Development Contract.",
                        "The Detailed User Stories.",
                        "The **Business Case**.",
                        "The Deployment Planning."
                    ],
                    correctAnswer: "The **Business Case**.",
                    explanation: "The Business Case is the core product that justifies the project. The 'Focus on Business Need' principle mandates that this justification is continuously reviewed to ensure the project remains viable and relevant throughout its entire lifecycle.",
                    tip: "If the Business Case is no longer valid, the project must be terminated or fundamentally re-scoped. This is the sponsor's key decision point."
                },
                {
                    question: "What is the *most* significant difference between the **Delivery Plan** and the **Timebox Plan**?",
                    options: [
                        "The Delivery Plan focuses on resources, the Timebox Plan focuses on risk.",
                        "The Delivery Plan provides a high-level sequence of increments; the Timebox Plan provides the detailed daily tasks for a specific timebox.",
                        "The Delivery Plan is owned by the Business Ambassador; the Timebox Plan is owned by the Project Manager.",
                        "The Delivery Plan is optional; the Timebox Plan is mandatory."
                    ],
                    correctAnswer: "The Delivery Plan provides a high-level sequence of increments; the Timebox Plan provides the detailed daily tasks for a specific timebox.",
                    explanation: "The Delivery Plan is a high-level forecast spanning the entire Project Increment, while the Timebox Plan breaks down the Delivery Plan into the immediate, tactical tasks required for a specific short Timebox.",
                    tip: "The Delivery Plan provides the long-term context; the Timebox Plan provides the short-term focus."
                },
                {
                    question: "How does the role of the **Team Leader** differ from the **Project Manager** in managing the **Delivery Plan**?",
                    options: [
                        "The Team Leader approves the plan, the Project Manager writes it.",
                        "The Team Leader is responsible for *day-to-day adherence* and management within the team; the Project Manager is responsible for *overall governance* and reporting on its status.",
                        "The Team Leader focuses on business alignment; the Project Manager focuses on technical details.",
                        "The Project Manager manages all resources; the Team Leader manages only time."
                    ],
                    correctAnswer: "The Team Leader is responsible for *day-to-day adherence* and management within the team; the Project Manager is responsible for *overall governance* and reporting on its status.",
                    explanation: "The Team Leader guides the team's execution of the work defined in the Delivery Plan at the day-to-day level. The Project Manager uses the plan to track project status, manage risks, and report to the Business Sponsor.",
                    tip: "The Project Manager owns the governance; the Team Leader owns the execution."
                },
                {
                    question: "When is the **Post-Implementation Review (PIR)** typically conducted, and which principle does it primarily support?",
                    options: [
                        "At the end of every Timebox; supports 'Communicate Continuously'.",
                        "At the end of the Foundations phase; supports 'Focus on Business Need'.",
                        "Several months *after* deployment; supports **'Learn from Experience'** and confirms the **Business Case**.",
                        "Immediately after the Deployment Timebox; supports 'Never Compromise Quality'."
                    ],
                    correctAnswer: "Several months *after* deployment; supports **'Learn from Experience'** and confirms the **Business Case**.",
                    explanation: "The PIR is usually conducted 3 to 6 months after the solution goes live (in the Evolve phase). Its purpose is to check if the intended business benefits have been realized and to capture formalized organizational lessons learned.",
                    tip: "The PIR confirms the *outcomes* of the project, not just the *outputs*."
                },
                {
                    question: "If a project is encountering a major issue that exceeds the Project Manager's tolerance level, what is the mandatory formal product that must be raised for the **Business Sponsor**?",
                    options: [
                        "The Project Approach Questionnaire (PAQ).",
                        "The **Exception Report**.",
                        "A new Business Case.",
                        "The Timebox Plan."
                    ],
                    correctAnswer: "The **Exception Report**.",
                    explanation: "When a deviation exceeds the tolerances delegated to the Project Manager, an **Exception Report** is formally raised and sent to the Business Sponsor, who is the only role with the authority to grant an extension of tolerance or make a strategic change.",
                    tip: "The Exception Report is the formal trigger for higher-level governance intervention."
                },
                {
                    question: "Which AgilePM product is primarily a technical blueprint for *non-functional* requirements, owned by the Technical Coordinator?",
                    options: [
                        "The Project Management Handbook.",
                        "The Prioritised Requirements List (PRL).",
                        "The **Solution Architecture Definition (SAD)**.",
                        "The Benefits Assessment."
                    ],
                    correctAnswer: "The **Solution Architecture Definition (SAD)**.",
                    explanation: "The SAD defines the technical framework, interfaces, and, crucially, the non-functional requirements (security, performance, scalability) that guide the development team. It is the core technical governance product.",
                    tip: "The SAD is the Technical Coordinator's primary governance tool for ensuring the 'Firm Foundations' are technical."
                },
                {
                    question: "When is the **Project Management Handbook (PMH)** created, and what is its primary function?",
                    options: [
                        "During Evolutionary Development; to manage day-to-day tasks.",
                        "During Foundations; to consolidate all project products and governance information for the Project Manager.",
                        "During Deployment; to guide the operational transition.",
                        "During Pre-Project; to define the initial requirements."
                    ],
                    correctAnswer: "During Foundations; to consolidate all project products and governance information for the Project Manager.",
                    explanation: "The PMH is a key output of the Foundations phase. It acts as the Project Manager's control document, consolidating all other governance products (PAQ, Business Case, etc.) into a cohesive management reference.",
                    tip: "The PMH is essentially the Project Manager's governance binder for the entire project."
                },
                {
                    question: "A **Business Ambassador** discovers an unmanageable dependency between two 'Must Have' requirements. Who is the primary role responsible for **resolving** this dependency conflict, even if it requires trade-offs?",
                    options: [
                        "The Solution Developer, as it is a technical issue.",
                        "The Project Manager, as they manage overall constraints and risk.",
                        "The **Business Ambassador** (in collaboration with the Team Leader), as they own the requirements and prioritization.",
                        "The Business Visionary, as they own the strategic direction."
                    ],
                    correctAnswer: "The **Business Ambassador** (in collaboration with the Team Leader), as they own the requirements and prioritization.",
                    explanation: "Dependencies between requirements are a prioritization issue. The Business Ambassador, owning the PRL and working closely with the Team Leader for technical input, must resolve this by choosing the necessary sequence and managing any trade-offs or escalations to the Project Manager if tolerances are breached.",
                    tip: "The Business Ambassador holds the tactical MoSCoW pen and is the first line of defense against requirements conflicts."
                },
                {
                    question: "What is the primary output of the **Exploration** step within a Delivery Timebox?",
                    options: [
                        "The final, tested code.",
                        "The updated **Prioritised Requirements List (PRL)** for the next Timebox.",
                        "Sufficient understanding of the requirements and design to allow the **Refinement** step to proceed.",
                        "The formal sign-off from the Business Sponsor."
                    ],
                    correctAnswer: "Sufficient understanding of the requirements and design to allow the **Refinement** step to proceed.",
                    explanation: "Exploration is the research and design part of the timebox, ensuring the team understands the user stories and has an initial technical approach before committing to building in the Refinement step.",
                    tip: "Exploration prevents costly mistakes by front-loading design discussions before significant coding begins."
                },
                {
                    question: "Which of the following activities best demonstrates the principle 'Collaborate' during a Project Increment?",
                    options: [
                        "The Project Manager sending weekly progress reports via email.",
                        "The Development Team working in isolation to maximize focus.",
                        "The **Business Ambassador** being readily available to the **Solution Developer** for detailed requirement clarification *daily*.",
                        "The Project Manager unilaterally updating the Delivery Plan without team input."
                    ],
                    correctAnswer: "The **Business Ambassador** being readily available to the **Solution Developer** for detailed requirement clarification *daily*.",
                    explanation: "Collaboration emphasizes frequent, informal, and face-to-face interaction between the business representative (BA) and the deliverer (SD) to resolve ambiguities immediately and ensure the right product is built.",
                    tip: "The collaboration principle is epitomized by the BA's continuous presence and commitment to answering the team's questions."
                },
                {
                    question: "The **Project Manager** notices that the team's velocity is consistently lower than forecast in the Delivery Plan. Which AgilePM governance product must be immediately updated and potentially reviewed?",
                    options: [
                        "The **Risk Log** (identifying the failure to meet the plan as a risk/issue).",
                        "The Project Management Handbook (PMH).",
                        "The Solution Architecture Definition (SAD).",
                        "The Benefits Assessment."
                    ],
                    correctAnswer: "The **Risk Log** (identifying the failure to meet the plan as a risk/issue).",
                    explanation: "A consistent deviation from the planned velocity is a clear indicator that the project may not meet its objectives, thus increasing risk. The Risk Log should be updated to formally track this issue and ensure mitigation steps are put in place.",
                    tip: "The Risk Log is the official product for tracking potential and realized threats to the project's success."
                },
                {
                    question: "What is the primary focus of the **Pre-Project** phase, as distinct from the **Feasibility** phase?",
                    options: [
                        "Feasibility determines the solution's *technical* viability; Pre-Project determines its *business* viability.",
                        "Pre-Project establishes the *initial* project Mandate and identifies key roles; Feasibility determines the *approach* and *viability* of that mandate.",
                        "Pre-Project is mandatory; Feasibility is optional.",
                        "Pre-Project plans the first Timebox; Feasibility plans the entire increment."
                    ],
                    correctAnswer: "Pre-Project establishes the *initial* project Mandate and identifies key roles; Feasibility determines the *approach* and *viability* of that mandate.",
                    explanation: "Pre-Project is a very short phase to get the 'Go' from the Business Sponsor and define the high-level need (Mandate). Feasibility takes that mandate and checks if the project is actually doable with AgilePM.",
                    tip: "Pre-Project is about 'Is there a job to do?' Feasibility is about 'Can we do the job *this way*?'"
                },
                {
                    question: "If a **Solution Tester** discovers a critical defect in a 'Must Have' requirement during the Refinement step of a Timebox, what is the immediate priority action?",
                    options: [
                        "Formally raise an **Exception Report** to the Business Sponsor.",
                        "Log the defect and prioritize its fix *within the current Timebox*.",
                        "De-scope the 'Must Have' and replace it with a 'Should Have'.",
                        "Wait until the Timebox Review to mention the defect."
                    ],
                    correctAnswer: "Log the defect and prioritize its fix *within the current Timebox*.",
                    explanation: "Quality is fixed (Never Compromise Quality). A critical defect in a 'Must Have' must be fixed immediately within the same Timebox to maintain quality and avoid technical debt. This takes priority over new feature development.",
                    tip: "Quality must be protected at all costs. Fixing defects in 'Must Have's is always a top priority."
                },
                {
                    question: "Which of the following best describes the principle **'Build Incrementally from Firm Foundations'** in practice?",
                    options: [
                        "Defining all requirements in detail, then building them in small parts.",
                        "Establishing high-level architecture and scope definition (Foundations), then allowing low-level details and design to evolve through Timeboxes.",
                        "Building the entire solution prototype first, then adding features incrementally.",
                        "Ignoring all upfront planning to allow the team maximum flexibility."
                    ],
                    correctAnswer: "Establishing high-level architecture and scope definition (Foundations), then allowing low-level details and design to evolve through Timeboxes.",
                    explanation: "This principle balances stability (Foundations) with flexibility (incremental delivery). The firm foundations protect the critical constraints and boundaries, while increments allow for adaptive learning and emergent detail.",
                    tip: "Firm Foundations are about establishing the *boundaries* and *constraints*, not the *details*."
                },
                {
                    question: "The **Business Ambassador** and **Project Manager** are reviewing the project risk status. What is the PM's specific responsibility regarding a high-impact, high-probability risk that *has* a clear, delegated mitigation strategy?",
                    options: [
                        "Immediately escalate to the Business Sponsor.",
                        "Execute the delegated mitigation strategy and report the outcome in the **Project Review Form**.",
                        "Ignore the risk, as mitigation is the Team Leader's responsibility.",
                        "Redefine the risk as a 'Could Have' and de-scope it."
                    ],
                    correctAnswer: "Execute the delegated mitigation strategy and report the outcome in the **Project Review Form**.",
                    explanation: "The Project Manager is expected to execute any delegated mitigation strategy *within their tolerance*. They then report on this action and its outcome in the Project Review Form at the end of the Increment, demonstrating control.",
                    tip: "The PM is empowered to manage risks within defined tolerances; escalation (Exception Report) is only for breaches of tolerance."
                },
                {
                    question: "What is the primary role of the **Solution Tester** regarding the **Definition of Done (DoD)**?",
                    options: [
                        "To write the DoD for the Project Manager.",
                        "To enforce the DoD and ensure that all acceptance criteria are met *before* the Timebox Review.",
                        "To prioritize the DoD against new functional requirements.",
                        "To ignore the DoD and focus only on bug fixing."
                    ],
                    correctAnswer: "To enforce the DoD and ensure that all acceptance criteria are met *before* the Timebox Review.",
                    explanation: "The Solution Tester plays a key role in quality assurance. They are the frontline enforcers of the DoD, verifying that the built product adheres to the defined quality standards and acceptance criteria.",
                    tip: "Testing in AgilePM is a continuous activity, not a phase, centered on enforcing the DoD."
                },
                {
                    question: "In the context of the **Foundations** phase, what is the primary content difference between the **Business Case** and the **Project Management Handbook (PMH)**?",
                    options: [
                        "The Business Case focuses on the technical solution; the PMH focuses on stakeholder collaboration.",
                        "The Business Case defines the *'Why'* (justification and benefits); the PMH defines the *'How'* (governance and management approach).",
                        "The Business Case is a living document; the PMH is static.",
                        "The Business Case is owned by the Project Manager; the PMH is owned by the Business Sponsor."
                    ],
                    correctAnswer: "The Business Case defines the *'Why'* (justification and benefits); the PMH defines the *'How'* (governance and management approach).",
                    explanation: "The Business Case provides the ultimate business rationale ('Why'). The PMH compiles all the procedural and governance decisions necessary to execute the project ('How').",
                    tip: "Understanding the distinction between 'Why' (BC), 'What' (PRL), and 'How' (PMH/PAQ/SAD) is fundamental to the Advanced Exam."
                },
                {
                    question: "Which of the following is an unacceptable action that violates the **'Demonstrate Control'** principle?",
                    options: [
                        "Updating the **Project Review Form** at the end of the Increment to reflect a missed 'Should Have'.",
                        "The **Team Leader** changing the MoSCoW priority of a requirement *without* consulting the Business Ambassador.",
                        "Logging a high-impact risk in the **Risk Log**.",
                        "Using a Burn-Up chart to visualize delivered functionality."
                    ],
                    correctAnswer: "The **Team Leader** changing the MoSCoW priority of a requirement *without* consulting the Business Ambassador.",
                    explanation: "Scope prioritization (MoSCoW) is a business decision owned by the Business Ambassador (and Visionary). Unilateral changes by the Team Leader violate the 'Demonstrate Control' principle, as it subverts the established governance process for scope management.",
                    tip: "Control is demonstrated by following the agreed-upon process (defined in the PAQ), especially for high-governance decisions like prioritization."
                },
                {
                    question: "The **Project Manager** has noticed that several minor project risks are recurring across multiple Timeboxes. Which formal product should be updated to address the pattern, ensuring the 'Learn from Experience' principle is applied at a governance level?",
                    options: [
                        "The Project Review Form.",
                        "The **Project Management Handbook (PMH)** (specifically the Risk Management approach section).",
                        "The Timebox Plan.",
                        "The Benefits Assessment."
                    ],
                    correctAnswer: "The **Project Management Handbook (PMH)** (specifically the Risk Management approach section).",
                    explanation: "The PMH, which consolidates the project's management approach (including risk management), should be updated. A recurring risk pattern suggests the *approach* to managing that risk type needs refinementâ€”a direct application of 'Learn from Experience' at the governance level.",
                    tip: "Lessons Learned (experience) should lead to changes in the *approach* (PMH/PAQ) for permanent improvement."
                },
                {
                    question: "What is the key purpose of the **Timebox Retrospective** and which role is primarily responsible for facilitating it?",
                    options: [
                        "To formally accept the increment; Project Manager.",
                        "To capture strategic project lessons; Business Sponsor.",
                        "To analyze team process and continuous improvement; **Team Leader** (or Scrum Master equivalent).",
                        "To re-prioritize the PRL; Business Ambassador."
                    ],
                    correctAnswer: "To analyze team process and continuous improvement; **Team Leader** (or Scrum Master equivalent).",
                    explanation: "The Retrospective (Review step) is a short, mandatory session focused on the team's working process. The Team Leader (acting as Scrum Master/Facilitator) is responsible for ensuring the team continuously improves its working practices, supporting the 'Collaborate' and 'Learn from Experience' principles.",
                    tip: "The Retrospective focuses on *process* improvement for the team; the Project Review focuses on *product* and *viability* for the project."
                }
            ]
        };

        // DOM Elements
        const settingsPanelEl = document.getElementById('settings-panel');
        const quizContentEl = document.getElementById('quiz-content');
        const questionCountEl = document.getElementById('question-count');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const questionCounterEl = document.getElementById('question-counter');
        const currentScoreEl = document.getElementById('current-score');
        const progressBarEl = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const explanationBoxEl = document.getElementById('explanation-box');
        const explanationTitleEl = document.getElementById('explanation-title');
        const explanationTextEl = document.getElementById('explanation-text');
        const tipBoxEl = document.getElementById('tip-box');
        const tipTextEl = document.getElementById('tip-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        
        // Modal Elements
        const resultsModal = new bootstrap.Modal(document.getElementById('resultsModal'));
        const finalScoreCorrectEl = document.getElementById('final-score-correct');
        const finalScoreTotalEl = document.getElementById('final-score-total');
        const finalScorePercentageEl = document.getElementById('final-score-percentage');
        const finalRecommendationsEl = document.getElementById('final-recommendations');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');

        // Quiz State
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let questions = [];
        let selectedQuestionCount = 30; // Defaulting to 30 for exam simulation

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            selectedQuestionCount = parseInt(questionCountEl.value);
            // Shuffle all questions and take the selected number
            const shuffledQuestions = shuffleArray([...quizData.questions]);
            questions = shuffledQuestions.slice(0, selectedQuestionCount);
            
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            
            // Hide settings, show quiz content
            settingsPanelEl.classList.add('d-none');
            quizContentEl.classList.remove('d-none');
            
            displayQuestion(currentQuestionIndex);
            updateScoreDisplay();
            resultsModal.hide();
        }

        function displayQuestion(index) {
            // Hide explanation from previous question
            explanationBoxEl.classList.add('d-none');
            tipBoxEl.classList.add('d-none');
            
            const question = questions[index];
            questionTextEl.textContent = question.question;
            
            // Clear previous options
            optionsContainerEl.innerHTML = '';
            
            // Display options
            question.options.forEach(optionText => {
                const button = document.createElement('button');
                button.textContent = optionText;
                button.classList.add('btn', 'option-btn');
                button.onclick = () => selectAnswer(button, optionText, index);
                optionsContainerEl.appendChild(button);
            });
            
            updateNavigation();
            updateProgressBar();
            
            // If the user has already answered this question, show their answer
            if (userAnswers[index] !== null) {
                showAnswerFeedback(index);
            }
        }
        
        function selectAnswer(button, selectedAnswer, questionIndex) {
            // Prevent re-answering
            if (userAnswers[questionIndex] !== null) return;
            
            const question = questions[questionIndex];
            const isCorrect = selectedAnswer === question.correctAnswer;
            
            userAnswers[questionIndex] = {
                selected: selectedAnswer,
                correct: question.correctAnswer,
                isCorrect: isCorrect
            };
            
            if(isCorrect) {
                score++;
            }
            updateScoreDisplay();
            showAnswerFeedback(questionIndex);
        }

        function showAnswerFeedback(index) {
            const userAnswer = userAnswers[index];
            if (!userAnswer) return;

            const question = questions[index];

            // Disable all option buttons
            const optionButtons = optionsContainerEl.querySelectorAll('.option-btn');
            optionButtons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === userAnswer.correct) {
                    btn.classList.add('correct');
                } else if (btn.textContent === userAnswer.selected) {
                    btn.classList.add('incorrect');
                }
            });

            // Show explanation
            explanationTextEl.textContent = question.explanation;
            if (userAnswer.isCorrect) {
                explanationTitleEl.textContent = "Correct! Well done!";
                explanationBoxEl.className = 'explanation-correct';
            } else {
                explanationTitleEl.textContent = "Explanation:";
                explanationBoxEl.className = 'explanation-incorrect';
            }
            explanationBoxEl.classList.remove('d-none');
            
            // Show tip if available
            if (question.tip) {
                tipTextEl.textContent = question.tip;
                tipBoxEl.classList.remove('d-none');
            }
        }

        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.classList.toggle('d-none', currentQuestionIndex === questions.length - 1);
            finishBtn.classList.toggle('d-none', currentQuestionIndex !== questions.length - 1);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBarEl.style.width = `${progress}%`;
            progressBarEl.setAttribute('aria-valuenow', progress);
            questionCounterEl.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
        }
        
        function updateScoreDisplay() {
            currentScoreEl.textContent = `Score: ${score}`;
        }

        function handleNext() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        function handlePrev() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        function showFinalResults() {
            const percentage = (score / questions.length) * 100;
            let scoreColor;
            let recommendationsHtml;

            // Passing score for official exam is 60%
            if (percentage >= 80) {
                scoreColor = 'var(--success-color)';
                recommendationsHtml = '<h5><i class="fas fa-trophy text-warning"></i> Certified Level!</h5><p>Exceptional mastery of AgilePM governance and products! You are highly prepared for any complex scenario in the official exam.</p>';
            } else if (percentage >= 60) {
                scoreColor = 'var(--agile-teal)';
                recommendationsHtml = '<h5><i class="fas fa-check-circle text-success"></i> Passed! (Official Score)</h5><p>Good job! You meet the passing requirement. Pay attention to the subtle differences between governance products like the PMH, PAQ, and Project Review Form.</p>';
            } else if (percentage >= 50) {
                scoreColor = 'var(--agile-blue)';
                recommendationsHtml = '<h5><i class="fas fa-redo-alt text-primary"></i> Needs Refinement!</h5><p>You have a grasp of the concepts, but the advanced distinction between official AgilePM products (documents) and roles requires further study.</p>';
            } else {
                scoreColor = 'var(--danger-color)';
                recommendationsHtml = '<h5><i class="fas fa-book-open text-secondary"></i> Study Required!</h5><p>We recommend a deep dive into the official AgilePM lifecycle, focusing on the outputs of the Foundations and the purpose of the formal governance products.</p>';
            }

            finalScoreCorrectEl.textContent = score;
            finalScoreTotalEl.textContent = questions.length;
            finalScorePercentageEl.textContent = `${percentage.toFixed(0)}%`;
            finalScorePercentageEl.style.color = scoreColor;
            finalRecommendationsEl.innerHTML = recommendationsHtml;

            resultsModal.show();
        }

        function restartQuiz() {
            // Show settings, hide quiz content
            settingsPanelEl.classList.remove('d-none');
            quizContentEl.classList.add('d-none');
            resultsModal.hide();
        }

        // Event Listeners
        startQuizBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', handleNext);
        prevBtn.addEventListener('click', handlePrev);
        finishBtn.addEventListener('click', showFinalResults);
        restartQuizBtn.addEventListener('click', restartQuiz);
        
        // Initial call - show settings panel
        document.addEventListener('DOMContentLoaded', () => {
            settingsPanelEl.classList.remove('d-none');
            quizContentEl.classList.add('d-none');
        });
    </script>
</body>
</html>
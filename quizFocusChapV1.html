<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgilePM Foundation v3 - Focus Principes, Cycle de Vie & Rôles</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --agile-purple: #8e44ad;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --light-bg: #f8f9fa;
            --white-color: #ffffff;
            --grey-text: #7f8c8d;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--primary-color);
            min-height: 100vh;
            padding-top: 2rem;
        }

        .quiz-container {
            max-width: 900px;
            margin: auto;
            background-color: var(--white-color);
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .quiz-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--agile-purple), var(--secondary-color));
        }

        .quiz-header h1 {
            color: var(--primary-color);
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .quiz-header p {
            text-align: center;
            color: var(--grey-text);
            margin-bottom: 2rem;
        }

        .focus-badge {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .chapter-pills {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .chapter-pill {
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .progress-container {
            margin-bottom: 1.5rem;
        }

        #question-counter {
            font-weight: 600;
            color: var(--secondary-color);
        }

        #question-card {
            border: none;
            border-radius: 10px;
            padding: 2rem;
            background-color: #fdfdfd;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--agile-purple);
        }
        
        #question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: 1rem 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1rem;
            border-radius: 8px;
            border: 2px solid #ecf0f1;
            background-color: var(--white-color);
            transition: all 0.3s ease;
            position: relative;
        }

        .option-btn:hover:not([disabled]) {
            border-color: var(--agile-purple);
            background-color: #f8f5ff;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .option-btn.correct {
            background-color: #e9f7ef;
            border-color: var(--success-color);
            color: var(--success-color);
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #fdeded;
            border-color: var(--danger-color);
            color: var(--danger-color);
            font-weight: 600;
        }

        #explanation-box {
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            font-size: 0.95rem;
            animation: fadeIn 0.5s ease;
        }
        
        #explanation-box h5 {
            font-weight: 700;
        }

        .explanation-correct {
             background-color: #e9f7ef;
             border-left: 5px solid var(--success-color);
        }

        .explanation-incorrect {
            background-color: #fdeded;
            border-left: 5px solid var(--danger-color);
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        .nav-btn {
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Modal styling */
        .modal-header {
            background: linear-gradient(135deg, var(--agile-purple), #6c5ce7);
            color: var(--white-color);
        }

        .modal-title-icon {
            font-size: 2rem;
            margin-right: 1rem;
        }
        
        .final-score {
            font-size: 3.5rem;
            font-weight: 700;
        }
        
        .score-text {
            font-size: 1.5rem;
        }
        
        .exam-info {
            background-color: #e8f4fd;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--secondary-color);
        }

        .chapter-analysis {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .chapter-progress {
            height: 8px;
            border-radius: 4px;
            margin-bottom: 0.5rem;
        }

        .strength-weakness {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }

        .strength {
            background-color: #e9f7ef;
            border-left: 4px solid var(--success-color);
        }

        .weakness {
            background-color: #fdeded;
            border-left: 4px solid var(--danger-color);
        }

        .focus-areas {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="quiz-container">
            <div class="quiz-header">
                <h1><i class="fas fa-bullseye" style="color:var(--agile-purple);"></i> AgilePM Foundation v3 - Focus Assessment</h1>
                <p>Quiz spécialisé sur les 3 premiers chapitres : Principes, Cycle de Vie & Rôles</p>
                <div class="text-center">
                    <div class="focus-badge">
                        <i class="fas fa-crosshairs"></i> FOCUS CHAPITRES 1-3
                    </div>
                </div>
                <div class="chapter-pills">
                    <div class="chapter-pill">1. Principes AgilePM</div>
                    <div class="chapter-pill">2. Cycle de Vie du Projet</div>
                    <div class="chapter-pill">3. Rôles & Responsabilités</div>
                </div>
            </div>
            
            <div class="focus-areas">
                <h5><i class="fas fa-target"></i> Domaines de Concentration</h5>
                <p class="mb-1">25 questions spécialisées sur les concepts fondamentaux d'AgilePM</p>
                <p class="mb-0">Maîtrisez les bases avant de passer aux aspects avancés</p>
            </div>

            <div class="exam-info">
                <h5><i class="fas fa-info-circle"></i> Détails de l'Évaluation</h5>
                <p class="mb-1"><strong>Format:</strong> 25 questions à choix multiples</p>
                <p class="mb-1"><strong>Focus:</strong> Principes, Cycle de Vie, Rôles AgilePM</p>
                <p class="mb-0"><strong>Résultat:</strong> Analyse détaillée par chapitre avec recommandations</p>
            </div>

            <div class="progress-container">
                 <div class="d-flex justify-content-between align-items-center mb-1">
                    <span id="question-counter">Question 1 / 25</span>
                    <span id="current-score">Score: 0</span>
                 </div>
                <div class="progress" style="height: 10px;">
                    <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 4%; background: linear-gradient(90deg, var(--agile-purple), var(--secondary-color));" aria-valuenow="4" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>

            <div id="question-card" class="card">
                <div class="card-body">
                    <h2 id="question-text">Chargement de la question...</h2>
                    <div id="options-container">
                        <!-- Les boutons d'options seront insérés ici par JavaScript -->
                    </div>
                    <div id="explanation-box" class="d-none">
                        <h5 id="explanation-title"></h5>
                        <p id="explanation-text"></p>
                    </div>
                </div>
            </div>

            <div class="quiz-navigation">
                <button id="prev-btn" class="btn btn-outline-secondary nav-btn" disabled><i class="fas fa-arrow-left"></i> Précédent</button>
                <button id="next-btn" class="btn btn-primary nav-btn">Suivant <i class="fas fa-arrow-right"></i></button>
                <button id="finish-btn" class="btn btn-success nav-btn d-none pulse">Terminer & Voir l'Analyse</button>
            </div>
        </div>
    </div>

    <!-- Modal for results -->
    <div class="modal fade" id="resultsModal" tabindex="-1" aria-labelledby="resultsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resultsModalLabel"><i class="fas fa-chart-bar modal-title-icon"></i>Résultats - Focus Chapitres 1-3</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="text-center mb-4">
                        <h4 class="score-text">Votre Score de Performance:</h4>
                        <p class="final-score" id="final-score-percentage">0%</p>
                        <p class="text-muted fs-5">
                            <span id="final-score-correct">0</span> bonnes réponses sur 
                            <span id="final-score-total">0</span>
                        </p>
                        <div id="pass-fail-message" class="mt-3"></div>
                    </div>
                    
                    <hr>
                    
                    <h5 class="mb-3"><i class="fas fa-analytics"></i> Analyse par Chapitre</h5>
                    <div id="chapter-analysis-container"></div>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h6><i class="fas fa-check-circle text-success"></i> Points Forts</h6>
                            <div id="strengths-list"></div>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-exclamation-triangle text-danger"></i> Axes d'Amélioration</h6>
                            <div id="weaknesses-list"></div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <h6><i class="fas fa-lightbulb text-warning"></i> Recommandations</h6>
                        <div id="final-recommendations"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="restart-quiz-btn"><i class="fas fa-redo"></i> Recommencer le Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const quizData = {
            questions: [
                // Chapitre 1: Principes AgilePM (9 questions)
                {
                    question: "Quel principe AgilePM est le plus directement mis en œuvre lorsqu'une équipe utilise la priorisation MoSCoW pour protéger les livraisons essentielles?",
                    options: [
                        "Se concentrer sur le besoin métier",
                        "Livrer à temps",
                        "Ne jamais compromettre la qualité",
                        "Démontrer le contrôle"
                    ],
                    correctAnswer: "Livrer à temps",
                    explanation: "Le principe 'Livrer à temps' est soutenu par la priorisation MoSCoW qui garantit que les exigences 'Must Have' sont livrées même lorsque des ajustements de scope sont nécessaires.",
                    chapter: "Principes"
                },
                {
                    question: "Comment le principe 'Développer de manière itérative' aide-t-il à gérer l'incertitude des exigences?",
                    options: [
                        "En gelant les exigences au début du projet",
                        "En fournissant des opportunités fréquentes de validation et d'ajustement",
                        "En limitant l'implication des parties prenantes",
                        "En documentant toutes les incertitudes"
                    ],
                    correctAnswer: "En fournissant des opportunités fréquentes de validation et d'ajustement",
                    explanation: "Le développement itératif crée des points de contrôle réguliers où les exigences peuvent être validées et ajustées en fonction des retours et de l'apprentissage.",
                    chapter: "Principes"
                },
                {
                    question: "Quel scénario illustre le mieux le principe 'Collaborer' dans un contexte AgilePM?",
                    options: [
                        "Le Chef de Projet prend toutes les décisions seul",
                        "L'Ambassadeur Métier travaille en étroite collaboration avec l'équipe de développement",
                        "Les parties prenantes ne sont consultées qu'aux jalons principaux",
                        "L'équipe utilise exclusivement la documentation pour communiquer"
                    ],
                    correctAnswer: "L'Ambassadeur Métier travaille en étroite collaboration avec l'équipe de développement",
                    explanation: "La collaboration active entre les rôles métier et techniques est au cœur du principe 'Collaborer' dans AgilePM.",
                    chapter: "Principes"
                },
                {
                    question: "Quel principe est le plus menacé lorsque les parties prenantes insistent pour ajouter des exigences sans ajuster le calendrier?",
                    options: [
                        "Se concentrer sur le besoin métier",
                        "Livrer à temps",
                        "Développer de manière itérative",
                        "Communiquer continuellement et clairement"
                    ],
                    correctAnswer: "Livrer à temps",
                    explanation: "Le principe 'Livrer à temps' est compromis lorsque le scope augmente sans ajustement du calendrier, menaçant les engagements de livraison.",
                    chapter: "Principes"
                },
                {
                    question: "Comment le principe 'Construire progressivement à partir de bases solides' aide-t-il à gérer la complexité?",
                    options: [
                        "En éliminant toutes les exigences complexes",
                        "En décomposant la complexité en incréments gérables",
                        "En transférant la complexité à des fournisseurs externes",
                        "En documentant la complexité de manière exhaustive"
                    ],
                    correctAnswer: "En décomposant la complexité en incréments gérables",
                    explanation: "Ce principe aborde la complexité en établissant des fondations solides puis en construisant la solution de manière incrémentale.",
                    chapter: "Principes"
                },
                {
                    question: "Quelle situation viole le plus clairement le principe 'Ne jamais compromettre la qualité'?",
                    options: [
                        "Dé-scoper des exigences 'Could Have' pour respecter les délais",
                        "Réduire les tests pour respecter une date de livraison",
                        "Utiliser la priorisation MoSCoW pour ajuster le scope",
                        "Travailler en timeboxes de durée fixe"
                    ],
                    correctAnswer: "Réduire les tests pour respecter une date de livraison",
                    explanation: "Réduire les activités d'assurance qualité compromet directement les standards de qualité, violant ce principe fondamental.",
                    chapter: "Principes"
                },
                {
                    question: "Comment le principe 'Démontrer le contrôle' se manifeste-t-il dans la pratique AgilePM?",
                    options: [
                        "Le Chef de Projet contrôle toutes les décisions",
                        "L'équipe suit un plan rigide sans déviation",
                        "Les progrès sont suivis de manière transparente avec des métriques claires",
                        "Tout le travail est documenté dans des rapports détaillés"
                    ],
                    correctAnswer: "Les progrès sont suivis de manière transparente avec des métriques claires",
                    explanation: "Démontrer le contrôle signifie rendre le progrès visible et mesurable à travers un suivi transparent, pas un contrôle rigide ou une documentation excessive.",
                    chapter: "Principes"
                },
                {
                    question: "Quel principe est le plus important pour gérer l'évolution des attentes des parties prenantes?",
                    options: [
                        "Se concentrer sur le besoin métier",
                        "Développer de manière itérative",
                        "Livrer à temps",
                        "Construire progressivement"
                    ],
                    correctAnswer: "Développer de manière itérative",
                    explanation: "Le développement itératif permet d'intégrer régulièrement les retours et d'ajuster les attentes basées sur des logiciels fonctionnels.",
                    chapter: "Principes"
                },
                {
                    question: "Comment le principe 'Communiquer continuellement et clairement' diffère-t-il de la communication traditionnelle?",
                    options: [
                        "Il élimine le besoin de documentation",
                        "Il favorise la communication fréquente et directe plutôt que formelle",
                        "Il limite la communication aux canaux officiels",
                        "Il rend la communication moins importante"
                    ],
                    correctAnswer: "Il favorise la communication fréquente et directe plutôt que formelle",
                    explanation: "Ce principe privilégie une communication régulière, directe et informelle plutôt que dépendre de communications formelles et espacées.",
                    chapter: "Principes"
                },

                // Chapitre 2: Cycle de Vie du Projet (8 questions)
                {
                    question: "Quelle est la différence principale entre les phases d'Exploration et d'Ingénierie dans AgilePM?",
                    options: [
                        "L'Exploration se concentre sur les prototypes, l'Ingénierie sur le code de production",
                        "L'Exploration livre le Sous-ensemble Utilisable Minimum, l'Ingénierie l'améliore",
                        "L'Exploration implique les utilisateurs, l'Ingénierie seulement les développeurs",
                        "Il n'y a pas de différence significative"
                    ],
                    correctAnswer: "L'Exploration livre le Sous-ensemble Utilisable Minimum, l'Ingénierie l'améliore",
                    explanation: "L'Exploration délivre la solution initiale utilisable (MUS), tandis que l'Ingénierie se concentre sur l'amélioration et l'enrichissement de cette solution.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Pendant quelle phase la Définition de l'Approche de Gestion est-elle généralement la plus affinée?",
                    options: [
                        "Phase de Faisabilité",
                        "Phase de Fondations",
                        "Début de la phase d'Exploration",
                        "Phase de Post-projet"
                    ],
                    correctAnswer: "Début de la phase d'Exploration",
                    explanation: "L'Approche de Gestion nécessite souvent des ajustements significatifs pendant les premières itérations d'Exploration lorsque l'équipe acquiert une expérience pratique.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Quel est l'objectif principal de la phase de Post-projet en termes d'apprentissage organisationnel?",
                    options: [
                        "Assigner des responsabilités pour les échecs du projet",
                        "Capturer les leçons apprises pour les projets futurs",
                        "Finaliser toute la documentation du projet",
                        "Célébrer l'achèvement du projet"
                    ],
                    correctAnswer: "Capturer les leçons apprises pour les projets futurs",
                    explanation: "La phase de Post-projet se concentre sur l'apprentissage organisationnel en capturant les leçons apprises et les bénéfices réalisés.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Comment la phase de Faisabilité contribue-t-elle à la gestion des risques?",
                    options: [
                        "En éliminant tous les risques du projet",
                        "En identifiant les risques majeurs avant un investissement significatif",
                        "En transférant les risques à des tiers",
                        "En documentant les risques pour la conformité"
                    ],
                    correctAnswer: "En identifiant les risques majeurs avant un investissement significatif",
                    explanation: "La phase de Faisabilité identifie les risques critiques tôt, permettant aux organisations de prendre des décisions éclairées avant d'engager des ressources substantielles.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Quelle phase se concentre sur la transition de la solution vers une utilisation opérationnelle?",
                    options: [
                        "Phase d'Exploration",
                        "Phase d'Ingénierie",
                        "Phase de Déploiement",
                        "Phase de Post-projet"
                    ],
                    correctAnswer: "Phase de Déploiement",
                    explanation: "La phase de Déploiement se concentre sur la mise à disposition de la solution pour une utilisation métier où les bénéfices sont réalisés.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Pendant quelle phase la Définition de l'Architecture de Solution est-elle généralement la plus volatile?",
                    options: [
                        "Phase de Faisabilité",
                        "Phase de Fondations",
                        "Début de la phase d'Exploration",
                        "Phase d'Ingénierie"
                    ],
                    correctAnswer: "Début de la phase d'Exploration",
                    explanation: "L'Architecture de Solution subit des raffinement significatifs pendant le début de l'Exploration lorsque les approches techniques sont testées et validées.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Quel est le principal objectif de la phase de Fondations?",
                    options: [
                        "Développer la solution initiale",
                        "Établir une base solide pour le projet",
                        "Déployer la solution aux utilisateurs",
                        "Examiner les bénéfices du projet"
                    ],
                    correctAnswer: "Établir une base solide pour le projet",
                    explanation: "La phase de Fondations établit les bases du projet en définissant le scope, les objectifs et les plans de haut niveau.",
                    chapter: "Cycle de Vie"
                },
                {
                    question: "Comment la phase de Déploiement contribue-t-elle à la réalisation de la valeur métier?",
                    options: [
                        "En assurant que la solution est techniquement parfaite",
                        "En transitionnant la solution vers une utilisation opérationnelle où les bénéfices sont réalisés",
                        "En documentant tous les apprentissages du projet",
                        "En planifiant le prochain projet"
                    ],
                    correctAnswer: "En transitionnant la solution vers une utilisation opérationnelle où les bénéfices sont réalisés",
                    explanation: "La phase de Déploiement met la solution à disposition pour une utilisation métier, ce qui est essentiel pour la réalisation de la valeur et des bénéfices.",
                    chapter: "Cycle de Vie"
                },

                // Chapitre 3: Rôles et Responsabilités (8 questions)
                {
                    question: "Quel rôle a la responsabilité principale de s'assurer que la solution répond aux véritables besoins métier plutôt qu'aux seules exigences documentées?",
                    options: [
                        "Analyste Métier",
                        "Visionnaire Métier",
                        "Ambassadeur Métier",
                        "Développeur de Solution"
                    ],
                    correctAnswer: "Ambassadeur Métier",
                    explanation: "L'Ambassadeur Métier travaille étroitement avec l'équipe de développement pour s'assurer que la solution émergente répond véritablement aux besoins métier.",
                    chapter: "Rôles"
                },
                {
                    question: "Dans un conflit entre les meilleures pratiques techniques et les priorités métier, quel rôle devrait faciliter la résolution?",
                    options: [
                        "Coordinateur Technique",
                        "Visionnaire Métier",
                        "Chef de Projet",
                        "Leader d'Équipe"
                    ],
                    correctAnswer: "Chef de Projet",
                    explanation: "Le Chef de Projet facilite la résolution des conflits entre perspectives techniques et métier, assurant un équilibre approprié.",
                    chapter: "Rôles"
                },
                {
                    question: "Quel rôle est principalement responsable de maintenir la cohérence technique de la solution à travers plusieurs équipes?",
                    options: [
                        "Coordinateur Technique",
                        "Leader d'Équipe",
                        "Développeur de Solution",
                        "Analyste Métier"
                    ],
                    correctAnswer: "Coordinateur Technique",
                    explanation: "Le Coordinateur Technique assure la cohérence technique et l'alignement avec l'architecture d'entreprise, particulièrement important dans les environnements multi-équipes.",
                    chapter: "Rôles"
                },
                {
                    question: "Quel rôle a l'autorité ultime pour approuver les changements à la Liste des Exigences Prioritaires pendant la phase de Livraison?",
                    options: [
                        "Visionnaire Métier",
                        "Chef de Projet",
                        "Ambassadeur Métier",
                        "Sponsor Métier"
                    ],
                    correctAnswer: "Visionnaire Métier",
                    explanation: "Le Visionnaire Métier détient la vision métier et a l'autorité ultime sur la priorisation des exigences, bien qu'il collabore typiquement avec l'Ambassadeur Métier.",
                    chapter: "Rôles"
                },
                {
                    question: "Quel rôle est principalement responsable de la gestion quotidienne de l'équipe de développement?",
                    options: [
                        "Chef de Projet",
                        "Leader d'Équipe",
                        "Coordinateur Technique",
                        "Visionnaire Métier"
                    ],
                    correctAnswer: "Leader d'Équipe",
                    explanation: "Le Leader d'Équipe est responsable de la gestion et coordination quotidiennes des activités de l'équipe de développement.",
                    chapter: "Rôles"
                },
                {
                    question: "Dans une implémentation AgilePM à grande échelle, quel rôle serait responsable de coordonner plusieurs Leaders d'Équipe?",
                    options: [
                        "Visionnaire Métier",
                        "Chef de Projet",
                        "Coordinateur Technique",
                        "Sponsor Métier"
                    ],
                    correctAnswer: "Chef de Projet",
                    explanation: "Le Chef de Projet coordonne les équipes et gère les dépendances entre les Leaders d'Équipe dans les implémentations plus larges.",
                    chapter: "Rôles"
                },
                {
                    question: "Quel rôle a la responsabilité principale de s'assurer que la solution s'aligne avec les standards d'architecture d'entreprise?",
                    options: [
                        "Coordinateur Technique",
                        "Développeur de Solution",
                        "Visionnaire Métier",
                        "Chef de Projet"
                    ],
                    correctAnswer: "Coordinateur Technique",
                    explanation: "Le Coordinateur Technique assure l'alignement de la solution avec les standards d'architecture d'entreprise et les exigences de gouvernance technique.",
                    chapter: "Rôles"
                },
                {
                    question: "Quel rôle est principalement responsable de maintenir le moral de l'équipe et de résoudre les conflits interpersonnels?",
                    options: [
                        "Leader d'Équipe",
                        "Chef de Projet",
                        "Ambassadeur Métier",
                        "Coordinateur Technique"
                    ],
                    correctAnswer: "Leader d'Équipe",
                    explanation: "Le Leader d'Équipe est responsable de la gestion quotidienne de l'équipe, incluant le maintien du moral et la résolution des problèmes interpersonnels.",
                    chapter: "Rôles"
                }
            ]
        };

        // DOM Elements
        const questionCounterEl = document.getElementById('question-counter');
        const currentScoreEl = document.getElementById('current-score');
        const progressBarEl = document.getElementById('progress-bar');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const explanationBoxEl = document.getElementById('explanation-box');
        const explanationTitleEl = document.getElementById('explanation-title');
        const explanationTextEl = document.getElementById('explanation-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        
        // Modal Elements
        const resultsModal = new bootstrap.Modal(document.getElementById('resultsModal'));
        const finalScoreCorrectEl = document.getElementById('final-score-correct');
        const finalScoreTotalEl = document.getElementById('final-score-total');
        const finalScorePercentageEl = document.getElementById('final-score-percentage');
        const finalRecommendationsEl = document.getElementById('final-recommendations');
        const passFailMessageEl = document.getElementById('pass-fail-message');
        const chapterAnalysisContainer = document.getElementById('chapter-analysis-container');
        const strengthsList = document.getElementById('strengths-list');
        const weaknessesList = document.getElementById('weaknesses-list');
        const restartQuizBtn = document.getElementById('restart-quiz-btn');

        // Quiz State
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let questions = [];
        let chapterPerformance = {};

        function initializeChapterPerformance() {
            const chapters = ["Principes", "Cycle de Vie", "Rôles"];
            chapterPerformance = {};
            chapters.forEach(chapter => {
                chapterPerformance[chapter] = {
                    correct: 0,
                    total: 0,
                    percentage: 0
                };
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz() {
            questions = shuffleArray([...quizData.questions]);
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = new Array(questions.length).fill(null);
            initializeChapterPerformance();
            displayQuestion(currentQuestionIndex);
            updateScoreDisplay();
            resultsModal.hide();
        }

        function displayQuestion(index) {
            // Hide explanation from previous question
            explanationBoxEl.classList.add('d-none');
            
            const question = questions[index];
            questionTextEl.textContent = question.question;
            
            // Clear previous options
            optionsContainerEl.innerHTML = '';
            
            // Display options
            question.options.forEach(optionText => {
                const button = document.createElement('button');
                button.textContent = optionText;
                button.classList.add('btn', 'option-btn');
                button.onclick = () => selectAnswer(button, optionText, index);
                optionsContainerEl.appendChild(button);
            });
            
            updateNavigation();
            updateProgressBar();
            
            // If the user has already answered this question, show their answer
            if (userAnswers[index] !== null) {
                showAnswerFeedback(index);
            }
        }
        
        function selectAnswer(button, selectedAnswer, questionIndex) {
            // Prevent re-answering
            if (userAnswers[questionIndex] !== null) return;
            
            const question = questions[questionIndex];
            const isCorrect = selectedAnswer === question.correctAnswer;
            
            userAnswers[questionIndex] = {
                selected: selectedAnswer,
                correct: question.correctAnswer,
                isCorrect: isCorrect,
                chapter: question.chapter
            };
            
            // Update chapter performance
            chapterPerformance[question.chapter].total++;
            if(isCorrect) {
                score++;
                chapterPerformance[question.chapter].correct++;
            }
            
            updateScoreDisplay();
            showAnswerFeedback(questionIndex);
        }

        function showAnswerFeedback(index) {
            const userAnswer = userAnswers[index];
            if (!userAnswer) return;

            const question = questions[index];

            // Disable all option buttons
            const optionButtons = optionsContainerEl.querySelectorAll('.option-btn');
            optionButtons.forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === userAnswer.correct) {
                    btn.classList.add('correct');
                } else if (btn.textContent === userAnswer.selected) {
                    btn.classList.add('incorrect');
                }
            });

            // Show explanation
            explanationTextEl.textContent = question.explanation;
            if (userAnswer.isCorrect) {
                explanationTitleEl.textContent = "Correct!";
                explanationBoxEl.className = 'explanation-correct';
            } else {
                explanationTitleEl.textContent = "Explication:";
                explanationBoxEl.className = 'explanation-incorrect';
            }
            explanationBoxEl.classList.remove('d-none');
        }

        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.classList.toggle('d-none', currentQuestionIndex === questions.length - 1);
            finishBtn.classList.toggle('d-none', currentQuestionIndex !== questions.length - 1);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBarEl.style.width = `${progress}%`;
            progressBarEl.setAttribute('aria-valuenow', progress);
            questionCounterEl.textContent = `Question ${currentQuestionIndex + 1} / ${questions.length}`;
        }
        
        function updateScoreDisplay() {
            currentScoreEl.textContent = `Score: ${score}`;
        }

        function handleNext() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        function handlePrev() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        function calculateChapterPerformance() {
            // Calculate percentages for each chapter
            Object.keys(chapterPerformance).forEach(chapter => {
                const data = chapterPerformance[chapter];
                if (data.total > 0) {
                    data.percentage = Math.round((data.correct / data.total) * 100);
                }
            });
        }

        function getPerformanceColor(percentage) {
            if (percentage >= 80) return 'success';
            if (percentage >= 60) return 'warning';
            return 'danger';
        }

        function showFinalResults() {
            calculateChapterPerformance();
            const percentage = (score / questions.length) * 100;
            const passed = percentage >= 70;
            let scoreColor;
            let recommendationsHtml;
            let passFailHtml;

            if (passed) {
                scoreColor = 'var(--success-color)';
                passFailHtml = '<div class="alert alert-success"><i class="fas fa-trophy"></i> <strong>Excellent!</strong> Vous démontrez une maîtrise solide des concepts fondamentaux.</div>';
                recommendationsHtml = '<p>Votre performance indique une compréhension approfondie des principes, du cycle de vie et des rôles AgilePM. Vous êtes prêt à passer aux chapitres avancés.</p>';
            } else {
                scoreColor = 'var(--danger-color)';
                passFailHtml = '<div class="alert alert-danger"><i class="fas fa-graduation-cap"></i> <strong>Bon effort!</strong> Concentrez-vous sur les domaines identifiés pour amélioration.</div>';
                recommendationsHtml = '<p>Revoyez les concepts des chapitres 1-3 avec attention. Les principes, le cycle de vie et les rôles forment la base essentielle d\'AgilePM.</p>';
            }

            finalScoreCorrectEl.textContent = score;
            finalScoreTotalEl.textContent = questions.length;
            finalScorePercentageEl.textContent = `${percentage.toFixed(0)}%`;
            finalScorePercentageEl.style.color = scoreColor;
            passFailMessageEl.innerHTML = passFailHtml;
            finalRecommendationsEl.innerHTML = recommendationsHtml;

            // Generate chapter analysis
            generateChapterAnalysis();
            
            // Generate strengths and weaknesses
            generateStrengthsWeaknesses();

            resultsModal.show();
        }

        function generateChapterAnalysis() {
            let analysisHtml = '<div class="chapter-analysis">';
            
            Object.keys(chapterPerformance).forEach(chapter => {
                const data = chapterPerformance[chapter];
                if (data.total > 0) {
                    const color = getPerformanceColor(data.percentage);
                    analysisHtml += `
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <span>${chapter}</span>
                                <span class="fw-bold text-${color}">${data.percentage}%</span>
                            </div>
                            <div class="progress chapter-progress">
                                <div class="progress-bar bg-${color}" role="progressbar" style="width: ${data.percentage}%" aria-valuenow="${data.percentage}" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <small class="text-muted">${data.correct}/${data.total} correct</small>
                        </div>
                    `;
                }
            });
            
            analysisHtml += '</div>';
            chapterAnalysisContainer.innerHTML = analysisHtml;
        }

        function generateStrengthsWeaknesses() {
            let strengthsHtml = '';
            let weaknessesHtml = '';
            
            Object.keys(chapterPerformance).forEach(chapter => {
                const data = chapterPerformance[chapter];
                if (data.total > 0) {
                    if (data.percentage >= 80) {
                        strengthsHtml += `<div class="strength-weakness strength">${chapter} (${data.percentage}%)</div>`;
                    } else if (data.percentage < 60) {
                        weaknessesHtml += `<div class="strength-weakness weakness">${chapter} (${data.percentage}%)</div>`;
                    }
                }
            });
            
            if (strengthsHtml === '') {
                strengthsHtml = '<div class="text-muted">Aucun point fort clairement identifié. Concentrez-vous sur les concepts fondamentaux.</div>';
            }
            
            if (weaknessesHtml === '') {
                weaknessesHtml = '<div class="text-muted">Aucune faiblesse majeure identifiée. Bonne compréhension globale des chapitres 1-3.</div>';
            }
            
            strengthsList.innerHTML = strengthsHtml;
            weaknessesList.innerHTML = weaknessesHtml;
        }

        // Event Listeners
        nextBtn.addEventListener('click', handleNext);
        prevBtn.addEventListener('click', handlePrev);
        finishBtn.addEventListener('click', showFinalResults);
        restartQuizBtn.addEventListener('click', () => {
            resultsModal.hide();
            // A short delay to allow modal to close before restarting
            setTimeout(startQuiz, 500);
        });
        
        // Initial call
        document.addEventListener('DOMContentLoaded', startQuiz);
    </script>
</body>
</html>
